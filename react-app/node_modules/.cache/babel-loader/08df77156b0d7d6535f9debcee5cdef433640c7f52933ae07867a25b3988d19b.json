{"ast":null,"code":"var _jsxFileName = \"/home/shubham/Documents/Personal/my-project/react-app/src/components/ChatHistorySidebar.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { chatHistoryAPI } from '../services/api';\nimport { LogOut, Plus, Edit3, Trash2, User, MessageSquare, Search, Download, Clock, MoreVertical, ChevronRight } from 'lucide-react';\nimport styled from 'styled-components';\nimport toast from 'react-hot-toast';\nimport ChatHistorySearch from './ChatHistorySearch';\nimport LogoutModal from './LogoutModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SidebarContainer = styled.div`\n  width: 320px;\n  background: #202123;\n  color: white;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-right: 1px solid #4a4a4a;\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    height: auto;\n    position: relative;\n  }\n`;\nconst Header = styled.div`\n  padding: 24px 20px 20px;\n  border-bottom: 1px solid #4a4a4a;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #2a2b2d;\n`;\nconst NewChatButton = styled.button`\n  width: calc(100% - 40px);\n  margin: 16px 20px;\n  padding: 12px 16px;\n  background: #404040;\n  border: 1px solid #5a5a5a;\n  border-radius: 8px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  font-weight: 500;\n  font-size: 14px;\n  \n  &:hover {\n    background: #505050;\n    border-color: #6a6a6a;\n    transform: translateY(-1px);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n`;\nconst SearchContainer = styled.div`\n  padding: 0 20px 16px;\n  position: relative;\n`;\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 12px 12px 12px 44px;\n  background: #404040;\n  border: 1px solid #5a5a5a;\n  border-radius: 10px;\n  color: white;\n  font-size: 14px;\n  transition: all 0.2s ease;\n  \n  &::placeholder {\n    color: #a0a0a0;\n  }\n  \n  &:focus {\n    outline: none;\n    border-color: #FF6B35;\n    background: #454545;\n    box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.1);\n  }\n`;\nconst SearchIcon = styled(Search)`\n  position: absolute;\n  left: 36px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #a0a0a0;\n  size: 16px;\n`;\nconst SessionsContainer = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 20px;\n  \n  /* Custom scrollbar */\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #202123;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #4a4a4a;\n    border-radius: 3px;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: #5a5a5a;\n  }\n`;\nconst SessionItem = styled.div`\n  padding: 12px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  margin-bottom: 4px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n  border: 1px solid transparent;\n  \n  ${props => props.active && `\n    background: #404040;\n    border-color: #FF6B35;\n    box-shadow: 0 2px 8px rgba(255, 107, 53, 0.2);\n  `}\n  \n  ${props => !props.active && `\n    &:hover {\n      background: #353535;\n      border-color: #5a5a5a;\n    }\n  `}\n`;\nconst SessionInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n  margin-right: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n`;\nconst SessionName = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n  color: white;\n  margin-bottom: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.3;\n  max-width: 200px;\n`;\nconst SessionMeta = styled.div`\n  font-size: 12px;\n  color: #a0a0a0;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  line-height: 1.2;\n`;\nconst SessionActions = styled.div`\n  display: flex;\n  gap: 4px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  \n  ${SessionItem}:hover & {\n    opacity: 1;\n  }\n`;\nconst ActionButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 6px;\n  border-radius: 6px;\n  color: #a0a0a0;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #4a4a4a;\n    color: white;\n    transform: scale(1.1);\n  }\n`;\nconst UserSection = styled.div`\n  padding: 20px;\n  border-top: 1px solid #4a4a4a;\n  background: #2a2b2d;\n`;\nconst UserInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: #404040;\n  border-radius: 10px;\n  border: 1px solid #5a5a5a;\n`;\nconst UserAvatar = styled.div`\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: bold;\n  font-size: 16px;\n  box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);\n`;\nconst UserDetails = styled.div`\n  flex: 1;\n`;\nconst UserName = styled.div`\n  font-size: 14px;\n  font-weight: 600;\n  color: white;\n  margin-bottom: 2px;\n`;\nconst UserStatus = styled.div`\n  font-size: 12px;\n  color: #a0a0a0;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  \n  &::before {\n    content: '';\n    width: 6px;\n    height: 6px;\n    background: #4ade80;\n    border-radius: 50%;\n    display: inline-block;\n  }\n`;\nconst LogoutButton = styled.button`\n  width: 100%;\n  padding: 12px 16px;\n  background: #404040;\n  border: 1px solid #5a5a5a;\n  border-radius: 10px;\n  color: #a0a0a0;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  font-size: 14px;\n  font-weight: 500;\n  \n  &:hover {\n    background: #505050;\n    border-color: #6a6a6a;\n    color: white;\n    transform: translateY(-1px);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n`;\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  color: #a0a0a0;\n  \n  svg {\n    margin-bottom: 16px;\n    opacity: 0.5;\n  }\n  \n  div {\n    font-size: 14px;\n    line-height: 1.4;\n  }\n`;\nconst LoadingSpinner = styled.div`\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  border: 3px solid #4a4a4a;\n  border-radius: 50%;\n  border-top-color: #FF6B35;\n  animation: spin 1s ease-in-out infinite;\n  \n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n`;\nconst CreateSessionModal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n`;\nconst ModalContent = styled.div`\n  background: #2a2b2d;\n  padding: 28px;\n  border-radius: 16px;\n  width: 420px;\n  max-width: 90vw;\n  border: 1px solid #4a4a4a;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n`;\nconst ModalTitle = styled.h3`\n  color: white;\n  margin: 0 0 20px 0;\n  font-size: 20px;\n  font-weight: 600;\n  letter-spacing: -0.5px;\n`;\nconst ModalInput = styled.input`\n  width: 100%;\n  padding: 14px 16px;\n  background: #404040;\n  border: 1px solid #5a5a5a;\n  border-radius: 10px;\n  color: white;\n  font-size: 14px;\n  margin-bottom: 20px;\n  transition: all 0.2s ease;\n  \n  &::placeholder {\n    color: #a0a0a0;\n  }\n  \n  &:focus {\n    outline: none;\n    border-color: #FF6B35;\n    background: #454545;\n    box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.1);\n  }\n`;\nconst ModalButtons = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\nconst ModalButton = styled.button`\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &.primary {\n    background: #FF6B35;\n    color: white;\n    border: none;\n    \n    &:hover {\n      background: #e53e3e;\n      transform: translateY(-1px);\n    }\n    \n    &:active {\n      transform: translateY(0);\n    }\n  }\n  \n  &.secondary {\n    background: #404040;\n    color: #a0a0a0;\n    border: 1px solid #5a5a5a;\n    \n    &:hover {\n      background: #505050;\n      color: white;\n      border-color: #6a6a6a;\n    }\n  }\n`;\nconst ChatHistorySidebar = /*#__PURE__*/React.forwardRef(({\n  currentSessionId,\n  setCurrentSessionId,\n  onSessionSelect,\n  onSessionRenamed,\n  currentSessionData\n}, ref) => {\n  const {\n    user,\n    logout\n  } = useAuth();\n  const [chatHistory, setChatHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showSearchModal, setShowSearchModal] = useState(false);\n  const [showLogoutModal, setShowLogoutModal] = useState(false);\n  const [newSessionName, setNewSessionName] = useState('');\n  const [editingSession, setEditingSession] = useState(null);\n  const [editName, setEditName] = useState('');\n\n  // Load chat history on component mount\n  useEffect(() => {\n    loadChatHistory();\n  }, []);\n  const loadChatHistory = async () => {\n    try {\n      setLoading(true);\n      const response = await chatHistoryAPI.getAllChatHistory();\n      if (response.success) {\n        setChatHistory(response.chat_history || []);\n\n        // Set first session as current if none selected\n        if (!currentSessionId && response.chat_history.length > 0) {\n          setCurrentSessionId(response.chat_history[0].session_id);\n        }\n      } else {\n        toast.error('Failed to load chat history');\n      }\n    } catch (error) {\n      console.error('Load chat history error:', error);\n      toast.error('Failed to load chat history');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Expose loadChatHistory function to parent component\n  React.useImperativeHandle(ref, () => ({\n    loadChatHistory\n  }));\n  const handleNewChat = async () => {\n    try {\n      console.log('Starting new chat...');\n\n      // Check if current session has messages\n      const currentSessionHasMessages = (currentSessionData === null || currentSessionData === void 0 ? void 0 : currentSessionData.message_count) > 0;\n      console.log('Current session message count:', currentSessionData === null || currentSessionData === void 0 ? void 0 : currentSessionData.message_count);\n\n      // If no existing chats, just clear the current session and let user start typing\n      if (chatHistory.length === 0) {\n        console.log('No existing chats, clearing current session');\n        setCurrentSessionId(null);\n\n        // Notify parent component to clear the session with a special flag\n        if (onSessionSelect) {\n          onSessionSelect({\n            isNewChatMode: true,\n            shouldCreateSessionOnFirstMessage: true\n          });\n        }\n        toast.success('New chat ready');\n        return;\n      }\n\n      // If current session has no messages, just clear it instead of creating a new one\n      if (currentSessionId && !currentSessionHasMessages) {\n        console.log('Current session has no messages, clearing instead of creating new');\n        setCurrentSessionId(null);\n\n        // Notify parent component to clear the session\n        if (onSessionSelect) {\n          onSessionSelect(null);\n        }\n        toast.success('New chat ready');\n        return;\n      }\n\n      // If there are existing chats and current session has messages, clear current session\n      // The ChatInterface will create a new session with unique name when user types\n      console.log('Clearing current session for new chat...');\n      setCurrentSessionId(null);\n\n      // Notify parent component to clear the session\n      if (onSessionSelect) {\n        onSessionSelect(null);\n      }\n      toast.success('New chat ready');\n    } catch (error) {\n      console.error('New chat error:', error);\n      toast.error('Failed to create new chat');\n    }\n  };\n  const handleCreateSession = async () => {\n    if (!newSessionName.trim()) return;\n    try {\n      const response = await chatHistoryAPI.createChatSession(newSessionName.trim());\n      if (response.success) {\n        await loadChatHistory(); // Reload to get the new session\n        setCurrentSessionId(response.session.id);\n        setShowCreateModal(false);\n        setNewSessionName('');\n        toast.success('New chat session created');\n      } else {\n        toast.error(response.message || 'Failed to create session');\n      }\n    } catch (error) {\n      console.error('Create session error:', error);\n      toast.error('Failed to create session');\n    }\n  };\n  const handleUpdateSession = async () => {\n    if (!editName.trim() || !editingSession) return;\n    try {\n      const response = await chatHistoryAPI.updateChatSession(editingSession, editName.trim());\n      if (response.success) {\n        await loadChatHistory(); // Reload to get updated data\n        setEditingSession(null);\n        setEditName('');\n        toast.success('Session renamed successfully');\n      } else {\n        toast.error(response.message || 'Failed to rename session');\n      }\n    } catch (error) {\n      console.error('Update session error:', error);\n      toast.error('Failed to rename session');\n    }\n  };\n  const handleDeleteSession = async sessionId => {\n    if (window.confirm('Are you sure you want to delete this session? This action cannot be undone.')) {\n      try {\n        const response = await chatHistoryAPI.deleteChatSession(sessionId);\n        if (response.success) {\n          await loadChatHistory(); // Reload to get updated data\n\n          // If deleted session was current, select first available\n          if (currentSessionId === sessionId) {\n            const remainingSessions = chatHistory.filter(s => s.session_id !== sessionId);\n            if (remainingSessions.length > 0) {\n              setCurrentSessionId(remainingSessions[0].session_id);\n            } else {\n              setCurrentSessionId(null);\n            }\n          }\n          toast.success('Session deleted successfully');\n        } else {\n          toast.error(response.message || 'Failed to delete session');\n        }\n      } catch (error) {\n        console.error('Delete session error:', error);\n        toast.error('Failed to delete session');\n      }\n    }\n  };\n  const handleExportSession = async sessionId => {\n    try {\n      const response = await chatHistoryAPI.exportSession(sessionId);\n      if (response.success) {\n        // Create and download JSON file\n        const dataStr = JSON.stringify(response.export_data, null, 2);\n        const dataBlob = new Blob([dataStr], {\n          type: 'application/json'\n        });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `chat-session-${sessionId}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n        toast.success('Session exported successfully');\n      } else {\n        toast.error(response.message || 'Failed to export session');\n      }\n    } catch (error) {\n      console.error('Export session error:', error);\n      toast.error('Failed to export session');\n    }\n  };\n  const handleLogout = () => {\n    setShowLogoutModal(true);\n  };\n  const handleConfirmLogout = () => {\n    logout();\n  };\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffTime = Math.abs(now - date);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    if (diffDays === 1) return 'Today';\n    if (diffDays === 2) return 'Yesterday';\n    if (diffDays <= 7) return `${diffDays - 1} days ago`;\n    if (diffDays <= 30) return `${Math.floor(diffDays / 7)} weeks ago`;\n    if (diffDays <= 365) return `${Math.floor(diffDays / 30)} months ago`;\n    return date.toLocaleDateString();\n  };\n  const filteredSessions = chatHistory.filter(session => session.session_name.toLowerCase().includes(searchQuery.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(SidebarContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: 0,\n          fontSize: '20px',\n          fontWeight: '700',\n          color: 'white',\n          letterSpacing: '-0.5px'\n        },\n        children: \"Chat History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n        onClick: () => setShowSearchModal(true),\n        title: \"Search conversations\",\n        style: {\n          background: '#404040',\n          border: '1px solid #5a5a5a',\n          borderRadius: '8px',\n          padding: '8px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Search, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewChatButton, {\n      onClick: handleNewChat,\n      children: [/*#__PURE__*/_jsxDEV(Plus, {\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 9\n      }, this), \"New Chat\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchContainer, {\n      children: [/*#__PURE__*/_jsxDEV(SearchIcon, {\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SearchInput, {\n        placeholder: \"Search conversations...\",\n        value: searchQuery,\n        onChange: e => setSearchQuery(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SessionsContainer, {\n      children: loading ? /*#__PURE__*/_jsxDEV(EmptyState, {\n        children: [/*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '12px'\n          },\n          children: \"Loading conversations...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 11\n      }, this) : filteredSessions.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n        children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n          size: 48,\n          style: {\n            marginBottom: '16px',\n            opacity: 0.5\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"No conversations found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            marginTop: '8px'\n          },\n          children: searchQuery ? 'Try adjusting your search' : 'Start a new conversation'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 698,\n        columnNumber: 11\n      }, this) : filteredSessions.map(session => /*#__PURE__*/_jsxDEV(SessionItem, {\n        active: currentSessionId === session.session_id,\n        onClick: () => {\n          setCurrentSessionId(session.session_id);\n          if (onSessionSelect) {\n            onSessionSelect(session);\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(SessionInfo, {\n          children: [/*#__PURE__*/_jsxDEV(SessionName, {\n            children: editingSession === session.session_id ? /*#__PURE__*/_jsxDEV(\"input\", {\n              value: editName,\n              onChange: e => setEditName(e.target.value),\n              onKeyPress: e => e.key === 'Enter' && handleUpdateSession(),\n              onBlur: handleUpdateSession,\n              autoFocus: true,\n              style: {\n                background: 'transparent',\n                border: 'none',\n                color: 'white',\n                fontSize: '14px',\n                width: '100%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 21\n            }, this) : session.session_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(SessionMeta, {\n            children: [/*#__PURE__*/_jsxDEV(Clock, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatDate(session.created_at)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 740,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#666',\n                fontSize: '10px'\n              },\n              children: \"\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [session.message_count, \" message\", session.message_count !== 1 ? 's' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 742,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(SessionActions, {\n          children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n            onClick: e => {\n              e.stopPropagation();\n              handleExportSession(session.session_id);\n            },\n            title: \"Export session\",\n            children: /*#__PURE__*/_jsxDEV(Download, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 754,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n            onClick: e => {\n              e.stopPropagation();\n              setEditingSession(session.session_id);\n              setEditName(session.session_name);\n            },\n            title: \"Rename session\",\n            children: /*#__PURE__*/_jsxDEV(Edit3, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n            onClick: e => {\n              e.stopPropagation();\n              handleDeleteSession(session.session_id);\n            },\n            title: \"Delete session\",\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 773,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 15\n        }, this)]\n      }, session.session_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 707,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 691,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UserSection, {\n      children: [/*#__PURE__*/_jsxDEV(UserInfo, {\n        children: [/*#__PURE__*/_jsxDEV(UserAvatar, {\n          children: user ? user.charAt(0).toUpperCase() : 'U'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(UserDetails, {\n          children: [/*#__PURE__*/_jsxDEV(UserName, {\n            children: user || 'User'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 787,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserStatus, {\n            children: \"Active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 788,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 786,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LogoutButton, {\n        onClick: handleLogout,\n        children: [/*#__PURE__*/_jsxDEV(LogOut, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 793,\n          columnNumber: 11\n        }, this), \"Logout\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 792,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 781,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LogoutModal, {\n      isOpen: showLogoutModal,\n      onClose: () => setShowLogoutModal(false),\n      onConfirm: handleConfirmLogout,\n      user: user,\n      currentSessionData: chatHistory.find(s => s.session_id === currentSessionId)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 7\n    }, this), showCreateModal && /*#__PURE__*/_jsxDEV(CreateSessionModal, {\n      onClick: () => setShowCreateModal(false),\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n          children: \"Create New Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 809,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalInput, {\n          placeholder: \"Enter session name...\",\n          value: newSessionName,\n          onChange: e => setNewSessionName(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && handleCreateSession(),\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalButtons, {\n          children: [/*#__PURE__*/_jsxDEV(ModalButton, {\n            className: \"secondary\",\n            onClick: () => setShowCreateModal(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 818,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalButton, {\n            className: \"primary\",\n            onClick: handleCreateSession,\n            disabled: !newSessionName.trim(),\n            children: \"Create\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 824,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 817,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 808,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 807,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ChatHistorySearch, {\n      isOpen: showSearchModal,\n      onClose: () => setShowSearchModal(false),\n      onResultClick: result => {\n        // Navigate to the session when a search result is clicked\n        const session = chatHistory.find(s => s.session_id === result.session_id);\n        if (session) {\n          setCurrentSessionId(result.session_id);\n          if (onSessionSelect) {\n            onSessionSelect(session);\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 836,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 652,\n    columnNumber: 5\n  }, this);\n});\nexport default ChatHistorySidebar;","map":{"version":3,"names":["React","useState","useEffect","useAuth","chatHistoryAPI","LogOut","Plus","Edit3","Trash2","User","MessageSquare","Search","Download","Clock","MoreVertical","ChevronRight","styled","toast","ChatHistorySearch","LogoutModal","jsxDEV","_jsxDEV","SidebarContainer","div","Header","NewChatButton","button","SearchContainer","SearchInput","input","SearchIcon","SessionsContainer","SessionItem","props","active","SessionInfo","SessionName","SessionMeta","SessionActions","ActionButton","UserSection","UserInfo","UserAvatar","UserDetails","UserName","UserStatus","LogoutButton","EmptyState","LoadingSpinner","CreateSessionModal","ModalContent","ModalTitle","h3","ModalInput","ModalButtons","ModalButton","ChatHistorySidebar","forwardRef","currentSessionId","setCurrentSessionId","onSessionSelect","onSessionRenamed","currentSessionData","ref","user","logout","chatHistory","setChatHistory","loading","setLoading","searchQuery","setSearchQuery","showCreateModal","setShowCreateModal","showSearchModal","setShowSearchModal","showLogoutModal","setShowLogoutModal","newSessionName","setNewSessionName","editingSession","setEditingSession","editName","setEditName","loadChatHistory","response","getAllChatHistory","success","chat_history","length","session_id","error","console","useImperativeHandle","handleNewChat","log","currentSessionHasMessages","message_count","isNewChatMode","shouldCreateSessionOnFirstMessage","handleCreateSession","trim","createChatSession","session","id","message","handleUpdateSession","updateChatSession","handleDeleteSession","sessionId","window","confirm","deleteChatSession","remainingSessions","filter","s","handleExportSession","exportSession","dataStr","JSON","stringify","export_data","dataBlob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","click","revokeObjectURL","handleLogout","handleConfirmLogout","formatDate","dateString","date","Date","now","diffTime","Math","abs","diffDays","ceil","floor","toLocaleDateString","filteredSessions","session_name","toLowerCase","includes","children","style","margin","fontSize","fontWeight","color","letterSpacing","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","background","border","borderRadius","padding","size","placeholder","value","onChange","e","target","marginTop","marginBottom","opacity","map","onKeyPress","key","onBlur","autoFocus","width","created_at","stopPropagation","charAt","toUpperCase","isOpen","onClose","onConfirm","find","className","disabled","onResultClick","result"],"sources":["/home/shubham/Documents/Personal/my-project/react-app/src/components/ChatHistorySidebar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { chatHistoryAPI } from '../services/api';\nimport { \n  LogOut, \n  Plus, \n  Edit3, \n  Trash2, \n  User, \n  MessageSquare,\n  Search,\n  Download,\n  Clock,\n  MoreVertical,\n  ChevronRight\n} from 'lucide-react';\nimport styled from 'styled-components';\nimport toast from 'react-hot-toast';\nimport ChatHistorySearch from './ChatHistorySearch';\nimport LogoutModal from './LogoutModal';\n\nconst SidebarContainer = styled.div`\n  width: 320px;\n  background: #202123;\n  color: white;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-right: 1px solid #4a4a4a;\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    height: auto;\n    position: relative;\n  }\n`;\n\nconst Header = styled.div`\n  padding: 24px 20px 20px;\n  border-bottom: 1px solid #4a4a4a;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #2a2b2d;\n`;\n\nconst NewChatButton = styled.button`\n  width: calc(100% - 40px);\n  margin: 16px 20px;\n  padding: 12px 16px;\n  background: #404040;\n  border: 1px solid #5a5a5a;\n  border-radius: 8px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  font-weight: 500;\n  font-size: 14px;\n  \n  &:hover {\n    background: #505050;\n    border-color: #6a6a6a;\n    transform: translateY(-1px);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n`;\n\nconst SearchContainer = styled.div`\n  padding: 0 20px 16px;\n  position: relative;\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 12px 12px 12px 44px;\n  background: #404040;\n  border: 1px solid #5a5a5a;\n  border-radius: 10px;\n  color: white;\n  font-size: 14px;\n  transition: all 0.2s ease;\n  \n  &::placeholder {\n    color: #a0a0a0;\n  }\n  \n  &:focus {\n    outline: none;\n    border-color: #FF6B35;\n    background: #454545;\n    box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.1);\n  }\n`;\n\nconst SearchIcon = styled(Search)`\n  position: absolute;\n  left: 36px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #a0a0a0;\n  size: 16px;\n`;\n\nconst SessionsContainer = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 20px;\n  \n  /* Custom scrollbar */\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #202123;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #4a4a4a;\n    border-radius: 3px;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: #5a5a5a;\n  }\n`;\n\nconst SessionItem = styled.div`\n  padding: 12px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  margin-bottom: 4px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n  border: 1px solid transparent;\n  \n  ${props => props.active && `\n    background: #404040;\n    border-color: #FF6B35;\n    box-shadow: 0 2px 8px rgba(255, 107, 53, 0.2);\n  `}\n  \n  ${props => !props.active && `\n    &:hover {\n      background: #353535;\n      border-color: #5a5a5a;\n    }\n  `}\n`;\n\nconst SessionInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n  margin-right: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n`;\n\nconst SessionName = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n  color: white;\n  margin-bottom: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.3;\n  max-width: 200px;\n`;\n\nconst SessionMeta = styled.div`\n  font-size: 12px;\n  color: #a0a0a0;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  line-height: 1.2;\n`;\n\nconst SessionActions = styled.div`\n  display: flex;\n  gap: 4px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  \n  ${SessionItem}:hover & {\n    opacity: 1;\n  }\n`;\n\nconst ActionButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 6px;\n  border-radius: 6px;\n  color: #a0a0a0;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #4a4a4a;\n    color: white;\n    transform: scale(1.1);\n  }\n`;\n\nconst UserSection = styled.div`\n  padding: 20px;\n  border-top: 1px solid #4a4a4a;\n  background: #2a2b2d;\n`;\n\nconst UserInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: #404040;\n  border-radius: 10px;\n  border: 1px solid #5a5a5a;\n`;\n\nconst UserAvatar = styled.div`\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: bold;\n  font-size: 16px;\n  box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);\n`;\n\nconst UserDetails = styled.div`\n  flex: 1;\n`;\n\nconst UserName = styled.div`\n  font-size: 14px;\n  font-weight: 600;\n  color: white;\n  margin-bottom: 2px;\n`;\n\nconst UserStatus = styled.div`\n  font-size: 12px;\n  color: #a0a0a0;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  \n  &::before {\n    content: '';\n    width: 6px;\n    height: 6px;\n    background: #4ade80;\n    border-radius: 50%;\n    display: inline-block;\n  }\n`;\n\nconst LogoutButton = styled.button`\n  width: 100%;\n  padding: 12px 16px;\n  background: #404040;\n  border: 1px solid #5a5a5a;\n  border-radius: 10px;\n  color: #a0a0a0;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  font-size: 14px;\n  font-weight: 500;\n  \n  &:hover {\n    background: #505050;\n    border-color: #6a6a6a;\n    color: white;\n    transform: translateY(-1px);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  color: #a0a0a0;\n  \n  svg {\n    margin-bottom: 16px;\n    opacity: 0.5;\n  }\n  \n  div {\n    font-size: 14px;\n    line-height: 1.4;\n  }\n`;\n\nconst LoadingSpinner = styled.div`\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  border: 3px solid #4a4a4a;\n  border-radius: 50%;\n  border-top-color: #FF6B35;\n  animation: spin 1s ease-in-out infinite;\n  \n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n`;\n\nconst CreateSessionModal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n`;\n\nconst ModalContent = styled.div`\n  background: #2a2b2d;\n  padding: 28px;\n  border-radius: 16px;\n  width: 420px;\n  max-width: 90vw;\n  border: 1px solid #4a4a4a;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n`;\n\nconst ModalTitle = styled.h3`\n  color: white;\n  margin: 0 0 20px 0;\n  font-size: 20px;\n  font-weight: 600;\n  letter-spacing: -0.5px;\n`;\n\nconst ModalInput = styled.input`\n  width: 100%;\n  padding: 14px 16px;\n  background: #404040;\n  border: 1px solid #5a5a5a;\n  border-radius: 10px;\n  color: white;\n  font-size: 14px;\n  margin-bottom: 20px;\n  transition: all 0.2s ease;\n  \n  &::placeholder {\n    color: #a0a0a0;\n  }\n  \n  &:focus {\n    outline: none;\n    border-color: #FF6B35;\n    background: #454545;\n    box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.1);\n  }\n`;\n\nconst ModalButtons = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n\nconst ModalButton = styled.button`\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &.primary {\n    background: #FF6B35;\n    color: white;\n    border: none;\n    \n    &:hover {\n      background: #e53e3e;\n      transform: translateY(-1px);\n    }\n    \n    &:active {\n      transform: translateY(0);\n    }\n  }\n  \n  &.secondary {\n    background: #404040;\n    color: #a0a0a0;\n    border: 1px solid #5a5a5a;\n    \n    &:hover {\n      background: #505050;\n      color: white;\n      border-color: #6a6a6a;\n    }\n  }\n`;\n\nconst ChatHistorySidebar = React.forwardRef(({ currentSessionId, setCurrentSessionId, onSessionSelect, onSessionRenamed, currentSessionData }, ref) => {\n  const { user, logout } = useAuth();\n  const [chatHistory, setChatHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showSearchModal, setShowSearchModal] = useState(false);\n  const [showLogoutModal, setShowLogoutModal] = useState(false);\n  const [newSessionName, setNewSessionName] = useState('');\n  const [editingSession, setEditingSession] = useState(null);\n  const [editName, setEditName] = useState('');\n\n  // Load chat history on component mount\n  useEffect(() => {\n    loadChatHistory();\n  }, []);\n\n\n\n  const loadChatHistory = async () => {\n    try {\n      setLoading(true);\n      const response = await chatHistoryAPI.getAllChatHistory();\n      if (response.success) {\n        setChatHistory(response.chat_history || []);\n        \n        // Set first session as current if none selected\n        if (!currentSessionId && response.chat_history.length > 0) {\n          setCurrentSessionId(response.chat_history[0].session_id);\n        }\n      } else {\n        toast.error('Failed to load chat history');\n      }\n    } catch (error) {\n      console.error('Load chat history error:', error);\n      toast.error('Failed to load chat history');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Expose loadChatHistory function to parent component\n  React.useImperativeHandle(ref, () => ({\n    loadChatHistory\n  }));\n\n  const handleNewChat = async () => {\n    try {\n      console.log('Starting new chat...');\n      \n      // Check if current session has messages\n      const currentSessionHasMessages = currentSessionData?.message_count > 0;\n      console.log('Current session message count:', currentSessionData?.message_count);\n      \n      // If no existing chats, just clear the current session and let user start typing\n      if (chatHistory.length === 0) {\n        console.log('No existing chats, clearing current session');\n        setCurrentSessionId(null);\n        \n        // Notify parent component to clear the session with a special flag\n        if (onSessionSelect) {\n          onSessionSelect({ \n            isNewChatMode: true, \n            shouldCreateSessionOnFirstMessage: true \n          });\n        }\n        \n        toast.success('New chat ready');\n        return;\n      }\n      \n      // If current session has no messages, just clear it instead of creating a new one\n      if (currentSessionId && !currentSessionHasMessages) {\n        console.log('Current session has no messages, clearing instead of creating new');\n        setCurrentSessionId(null);\n        \n        // Notify parent component to clear the session\n        if (onSessionSelect) {\n          onSessionSelect(null);\n        }\n        \n        toast.success('New chat ready');\n        return;\n      }\n      \n      // If there are existing chats and current session has messages, clear current session\n      // The ChatInterface will create a new session with unique name when user types\n      console.log('Clearing current session for new chat...');\n      setCurrentSessionId(null);\n      \n      // Notify parent component to clear the session\n      if (onSessionSelect) {\n        onSessionSelect(null);\n      }\n      \n      toast.success('New chat ready');\n    } catch (error) {\n      console.error('New chat error:', error);\n      toast.error('Failed to create new chat');\n    }\n  };\n\n  const handleCreateSession = async () => {\n    if (!newSessionName.trim()) return;\n    \n    try {\n      const response = await chatHistoryAPI.createChatSession(newSessionName.trim());\n      if (response.success) {\n        await loadChatHistory(); // Reload to get the new session\n        setCurrentSessionId(response.session.id);\n        setShowCreateModal(false);\n        setNewSessionName('');\n        toast.success('New chat session created');\n      } else {\n        toast.error(response.message || 'Failed to create session');\n      }\n    } catch (error) {\n      console.error('Create session error:', error);\n      toast.error('Failed to create session');\n    }\n  };\n\n  const handleUpdateSession = async () => {\n    if (!editName.trim() || !editingSession) return;\n    \n    try {\n      const response = await chatHistoryAPI.updateChatSession(editingSession, editName.trim());\n      if (response.success) {\n        await loadChatHistory(); // Reload to get updated data\n        setEditingSession(null);\n        setEditName('');\n        toast.success('Session renamed successfully');\n      } else {\n        toast.error(response.message || 'Failed to rename session');\n      }\n    } catch (error) {\n      console.error('Update session error:', error);\n      toast.error('Failed to rename session');\n    }\n  };\n\n  const handleDeleteSession = async (sessionId) => {\n    if (window.confirm('Are you sure you want to delete this session? This action cannot be undone.')) {\n      try {\n        const response = await chatHistoryAPI.deleteChatSession(sessionId);\n        if (response.success) {\n          await loadChatHistory(); // Reload to get updated data\n          \n          // If deleted session was current, select first available\n          if (currentSessionId === sessionId) {\n            const remainingSessions = chatHistory.filter(s => s.session_id !== sessionId);\n            if (remainingSessions.length > 0) {\n              setCurrentSessionId(remainingSessions[0].session_id);\n            } else {\n              setCurrentSessionId(null);\n            }\n          }\n          \n          toast.success('Session deleted successfully');\n        } else {\n          toast.error(response.message || 'Failed to delete session');\n        }\n      } catch (error) {\n        console.error('Delete session error:', error);\n        toast.error('Failed to delete session');\n      }\n    }\n  };\n\n  const handleExportSession = async (sessionId) => {\n    try {\n      const response = await chatHistoryAPI.exportSession(sessionId);\n      if (response.success) {\n        // Create and download JSON file\n        const dataStr = JSON.stringify(response.export_data, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `chat-session-${sessionId}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n        toast.success('Session exported successfully');\n      } else {\n        toast.error(response.message || 'Failed to export session');\n      }\n    } catch (error) {\n      console.error('Export session error:', error);\n      toast.error('Failed to export session');\n    }\n  };\n\n  const handleLogout = () => {\n    setShowLogoutModal(true);\n  };\n\n  const handleConfirmLogout = () => {\n    logout();\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffTime = Math.abs(now - date);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 1) return 'Today';\n    if (diffDays === 2) return 'Yesterday';\n    if (diffDays <= 7) return `${diffDays - 1} days ago`;\n    if (diffDays <= 30) return `${Math.floor(diffDays / 7)} weeks ago`;\n    if (diffDays <= 365) return `${Math.floor(diffDays / 30)} months ago`;\n    return date.toLocaleDateString();\n  };\n\n  const filteredSessions = chatHistory.filter(session =>\n    session.session_name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <SidebarContainer>\n      <Header>\n        <h2 style={{ \n          margin: 0, \n          fontSize: '20px', \n          fontWeight: '700',\n          color: 'white',\n          letterSpacing: '-0.5px'\n        }}>\n          Chat History\n        </h2>\n        <ActionButton\n          onClick={() => setShowSearchModal(true)}\n          title=\"Search conversations\"\n          style={{\n            background: '#404040',\n            border: '1px solid #5a5a5a',\n            borderRadius: '8px',\n            padding: '8px'\n          }}\n        >\n          <Search size={18} />\n        </ActionButton>\n      </Header>\n\n      <NewChatButton onClick={handleNewChat}>\n        <Plus size={16} />\n        New Chat\n      </NewChatButton>\n\n      <SearchContainer>\n        <SearchIcon size={16} />\n        <SearchInput\n          placeholder=\"Search conversations...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n        />\n      </SearchContainer>\n\n      <SessionsContainer>\n        {loading ? (\n          <EmptyState>\n            <LoadingSpinner />\n            <div style={{ marginTop: '12px' }}>Loading conversations...</div>\n          </EmptyState>\n        ) : filteredSessions.length === 0 ? (\n          <EmptyState>\n            <MessageSquare size={48} style={{ marginBottom: '16px', opacity: 0.5 }} />\n            <div>No conversations found</div>\n            <div style={{ fontSize: '12px', marginTop: '8px' }}>\n              {searchQuery ? 'Try adjusting your search' : 'Start a new conversation'}\n            </div>\n          </EmptyState>\n        ) : (\n          filteredSessions.map((session) => (\n            <SessionItem\n              key={session.session_id}\n              active={currentSessionId === session.session_id}\n              onClick={() => {\n                setCurrentSessionId(session.session_id);\n                if (onSessionSelect) {\n                  onSessionSelect(session);\n                }\n              }}\n            >\n              <SessionInfo>\n                <SessionName>\n                  {editingSession === session.session_id ? (\n                    <input\n                      value={editName}\n                      onChange={(e) => setEditName(e.target.value)}\n                      onKeyPress={(e) => e.key === 'Enter' && handleUpdateSession()}\n                      onBlur={handleUpdateSession}\n                      autoFocus\n                      style={{\n                        background: 'transparent',\n                        border: 'none',\n                        color: 'white',\n                        fontSize: '14px',\n                        width: '100%'\n                      }}\n                    />\n                  ) : (\n                    session.session_name\n                  )}\n                </SessionName>\n                <SessionMeta>\n                  <Clock size={12} />\n                  <span>{formatDate(session.created_at)}</span>\n                  <span style={{ color: '#666', fontSize: '10px' }}>•</span>\n                  <span>{session.message_count} message{session.message_count !== 1 ? 's' : ''}</span>\n                </SessionMeta>\n              </SessionInfo>\n              \n              <SessionActions>\n                <ActionButton\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleExportSession(session.session_id);\n                  }}\n                  title=\"Export session\"\n                >\n                  <Download size={14} />\n                </ActionButton>\n                <ActionButton\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setEditingSession(session.session_id);\n                    setEditName(session.session_name);\n                  }}\n                  title=\"Rename session\"\n                >\n                  <Edit3 size={14} />\n                </ActionButton>\n                <ActionButton\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDeleteSession(session.session_id);\n                  }}\n                  title=\"Delete session\"\n                >\n                  <Trash2 size={14} />\n                </ActionButton>\n              </SessionActions>\n            </SessionItem>\n          ))\n        )}\n      </SessionsContainer>\n\n      <UserSection>\n        <UserInfo>\n          <UserAvatar>\n            {user ? user.charAt(0).toUpperCase() : 'U'}\n          </UserAvatar>\n          <UserDetails>\n            <UserName>{user || 'User'}</UserName>\n            <UserStatus>Active</UserStatus>\n          </UserDetails>\n        </UserInfo>\n        \n        <LogoutButton onClick={handleLogout}>\n          <LogOut size={16} />\n          Logout\n        </LogoutButton>\n      </UserSection>\n\n      <LogoutModal\n        isOpen={showLogoutModal}\n        onClose={() => setShowLogoutModal(false)}\n        onConfirm={handleConfirmLogout}\n        user={user}\n        currentSessionData={chatHistory.find(s => s.session_id === currentSessionId)}\n      />\n\n      {showCreateModal && (\n        <CreateSessionModal onClick={() => setShowCreateModal(false)}>\n          <ModalContent onClick={(e) => e.stopPropagation()}>\n            <ModalTitle>Create New Chat</ModalTitle>\n            <ModalInput\n              placeholder=\"Enter session name...\"\n              value={newSessionName}\n              onChange={(e) => setNewSessionName(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && handleCreateSession()}\n              autoFocus\n            />\n            <ModalButtons>\n              <ModalButton \n                className=\"secondary\" \n                onClick={() => setShowCreateModal(false)}\n              >\n                Cancel\n              </ModalButton>\n              <ModalButton \n                className=\"primary\" \n                onClick={handleCreateSession}\n                disabled={!newSessionName.trim()}\n              >\n                Create\n              </ModalButton>\n            </ModalButtons>\n          </ModalContent>\n        </CreateSessionModal>\n      )}\n\n      <ChatHistorySearch\n        isOpen={showSearchModal}\n        onClose={() => setShowSearchModal(false)}\n        onResultClick={(result) => {\n          // Navigate to the session when a search result is clicked\n          const session = chatHistory.find(s => s.session_id === result.session_id);\n          if (session) {\n            setCurrentSessionId(result.session_id);\n            if (onSessionSelect) {\n              onSessionSelect(session);\n            }\n          }\n        }}\n      />\n    </SidebarContainer>\n  );\n});\n\nexport default ChatHistorySidebar;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,OAAO,QAAQ,yBAAyB;AACjD,SAASC,cAAc,QAAQ,iBAAiB;AAChD,SACEC,MAAM,EACNC,IAAI,EACJC,KAAK,EACLC,MAAM,EACNC,IAAI,EACJC,aAAa,EACbC,MAAM,EACNC,QAAQ,EACRC,KAAK,EACLC,YAAY,EACZC,YAAY,QACP,cAAc;AACrB,OAAOC,MAAM,MAAM,mBAAmB;AACtC,OAAOC,KAAK,MAAM,iBAAiB;AACnC,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,OAAOC,WAAW,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,gBAAgB,GAAGN,MAAM,CAACO,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,MAAM,GAAGR,MAAM,CAACO,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAME,aAAa,GAAGT,MAAM,CAACU,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,eAAe,GAAGX,MAAM,CAACO,GAAG;AAClC;AACA;AACA,CAAC;AAED,MAAMK,WAAW,GAAGZ,MAAM,CAACa,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,UAAU,GAAGd,MAAM,CAACL,MAAM,CAAC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMoB,iBAAiB,GAAGf,MAAM,CAACO,GAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMS,WAAW,GAAGhB,MAAM,CAACO,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIU,KAAK,IAAIA,KAAK,CAACC,MAAM,IAAI;AAC7B;AACA;AACA;AACA,GAAG;AACH;AACA,IAAID,KAAK,IAAI,CAACA,KAAK,CAACC,MAAM,IAAI;AAC9B;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AAED,MAAMC,WAAW,GAAGnB,MAAM,CAACO,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMa,WAAW,GAAGpB,MAAM,CAACO,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMc,WAAW,GAAGrB,MAAM,CAACO,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMe,cAAc,GAAGtB,MAAM,CAACO,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA,IAAIS,WAAW;AACf;AACA;AACA,CAAC;AAED,MAAMO,YAAY,GAAGvB,MAAM,CAACU,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMc,WAAW,GAAGxB,MAAM,CAACO,GAAG;AAC9B;AACA;AACA;AACA,CAAC;AAED,MAAMkB,QAAQ,GAAGzB,MAAM,CAACO,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMmB,UAAU,GAAG1B,MAAM,CAACO,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMoB,WAAW,GAAG3B,MAAM,CAACO,GAAG;AAC9B;AACA,CAAC;AAED,MAAMqB,QAAQ,GAAG5B,MAAM,CAACO,GAAG;AAC3B;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMsB,UAAU,GAAG7B,MAAM,CAACO,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMuB,YAAY,GAAG9B,MAAM,CAACU,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMqB,UAAU,GAAG/B,MAAM,CAACO,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMyB,cAAc,GAAGhC,MAAM,CAACO,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAM0B,kBAAkB,GAAGjC,MAAM,CAACO,GAAG;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAM2B,YAAY,GAAGlC,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAM4B,UAAU,GAAGnC,MAAM,CAACoC,EAAE;AAC5B;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,UAAU,GAAGrC,MAAM,CAACa,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMyB,YAAY,GAAGtC,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA,CAAC;AAED,MAAMgC,WAAW,GAAGvC,MAAM,CAACU,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAM8B,kBAAkB,gBAAGxD,KAAK,CAACyD,UAAU,CAAC,CAAC;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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}