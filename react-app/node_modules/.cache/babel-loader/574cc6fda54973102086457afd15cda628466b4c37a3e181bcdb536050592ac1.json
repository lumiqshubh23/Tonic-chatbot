{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/shubham/Documents/Personal/my-project/react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21;import React from'react';import ReactMarkdown from'react-markdown';import{User,Bot,Clock,Download,BarChart3,Table as TableIcon}from'lucide-react';import styled from'styled-components';import ChartRenderer from'./ChartRenderer';import ErrorBoundary from'./ErrorBoundary';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MessageContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: \",\";\\n  margin-bottom: 20px;\\n  padding: 0 20px;\\n  width: 100%;\\n\"])),props=>props.isUser?'flex-end':'flex-start');const MessageWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  max-width: 70%;\\n  display: flex;\\n  gap: 12px;\\n  align-items: flex-start;\\n  flex-direction: \",\";\\n\"])),props=>props.isUser?'row-reverse':'row');const Avatar=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: 40px;\\n  height: 40px;\\n  border-radius: 50%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-shrink: 0;\\n  font-weight: bold;\\n  color: white;\\n  \\n  \",\"\\n  \\n  \",\"\\n\"])),props=>props.type==='user'&&\"\\n    background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\\n  \",props=>props.type==='ai'&&\"\\n    background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);\\n  \");const MessageContent=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  color: \",\";\\n  border-radius: 18px;\\n  padding: 16px 20px;\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\n  border: 1px solid \",\";\\n  max-width: 100%;\\n  word-wrap: break-word;\\n  overflow-wrap: break-word;\\n  position: relative;\\n  \\n  \",\"\\n  \\n  \",\"\\n\"])),props=>props.isUser?'linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%)':'white',props=>props.isUser?'white':'#4a5568',props=>props.isUser?'transparent':'#e2e8f0',props=>props.isUser&&\"\\n    border-bottom-right-radius: 6px;\\n  \",props=>!props.isUser&&\"\\n    border-bottom-left-radius: 6px;\\n  \");const MessageHeader=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  margin-bottom: 8px;\\n  padding-bottom: 4px;\\n  border-bottom: 1px solid \",\";\\n\"])),props=>props.isUser?'rgba(255, 255, 255, 0.2)':'#f1f5f9');const MessageAuthor=styled.span(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  font-weight: 600;\\n  color: \",\";\\n  font-size: 14px;\\n\"])),props=>props.isUser?'white':'#2d3748');const MessageTime=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  font-size: 0.8rem;\\n  color: \",\";\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n\"])),props=>props.isUser?'rgba(255, 255, 255, 0.8)':'#718096');const MessageText=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  line-height: 1.7;\\n  font-size: 15px;\\n  \\n  p {\\n    margin: 0 0 16px 0;\\n    \\n    &:last-child {\\n      margin-bottom: 0;\\n    }\\n  }\\n  \\n  h1, h2, h3, h4, h5, h6 {\\n    color: \",\";\\n    margin: 20px 0 12px 0;\\n    font-weight: 600;\\n  }\\n  \\n  h1 { font-size: 1.8rem; }\\n  h2 { font-size: 1.6rem; }\\n  h3 { font-size: 1.4rem; }\\n  h4 { font-size: 1.2rem; }\\n  h5 { font-size: 1.1rem; }\\n  h6 { font-size: 1rem; }\\n  \\n  ul, ol {\\n    margin: 12px 0;\\n    padding-left: 24px;\\n  }\\n  \\n  li {\\n    margin: 6px 0;\\n  }\\n  \\n  blockquote {\\n    border-left: 4px solid \",\";\\n    padding-left: 16px;\\n    margin: 16px 0;\\n    color: \",\";\\n    font-style: italic;\\n  }\\n  \\n  code {\\n    background: \",\";\\n    padding: 2px 6px;\\n    border-radius: 4px;\\n    font-family: 'Courier New', monospace;\\n    font-size: 0.9rem;\\n    color: \",\";\\n  }\\n  \\n  pre {\\n    background: \",\";\\n    padding: 16px;\\n    border-radius: 8px;\\n    overflow-x: auto;\\n    margin: 16px 0;\\n    border: 1px solid \",\";\\n    \\n    code {\\n      background: none;\\n      padding: 0;\\n      color: \",\";\\n    }\\n  }\\n  \\n  table {\\n    border-collapse: collapse;\\n    width: 100%;\\n    margin: 16px 0;\\n    font-size: 0.9rem;\\n    background: \",\";\\n    border-radius: 8px;\\n    overflow: hidden;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n  }\\n  \\n  th, td {\\n    border: 1px solid \",\";\\n    padding: 12px;\\n    text-align: left;\\n  }\\n  \\n  th {\\n    background: \",\";\\n    font-weight: 600;\\n    color: \",\";\\n  }\\n  \\n  tr:nth-child(even) {\\n    background: \",\";\\n  }\\n  \\n  tr:hover {\\n    background: \",\";\\n  }\\n\"])),props=>props.isUser?'white':'#4a5568',props=>props.isUser?'white':'#2d3748',props=>props.isUser?'rgba(255, 255, 255, 0.6)':'#FF6B35',props=>props.isUser?'rgba(255, 255, 255, 0.9)':'#718096',props=>props.isUser?'rgba(255, 255, 255, 0.2)':'#f8f9fa',props=>props.isUser?'white':'#e53e3e',props=>props.isUser?'rgba(255, 255, 255, 0.1)':'#f8f9fa',props=>props.isUser?'rgba(255, 255, 255, 0.2)':'#e2e8f0',props=>props.isUser?'white':'#4a5568',props=>props.isUser?'rgba(255, 255, 255, 0.1)':'white',props=>props.isUser?'rgba(255, 255, 255, 0.2)':'#e2e8f0',props=>props.isUser?'rgba(255, 255, 255, 0.2)':'#f8f9fa',props=>props.isUser?'white':'#4a5568',props=>props.isUser?'rgba(255, 255, 255, 0.05)':'#f8f9fa',props=>props.isUser?'rgba(255, 255, 255, 0.1)':'#edf2f7');const VisualizationSection=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  margin-top: 20px;\\n  border-top: 1px solid #e2e8f0;\\n  padding-top: 16px;\\n\"])));const SectionTitle=styled.h4(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  color: #2d3748;\\n  margin: 0 0 12px 0;\\n  font-weight: 600;\\n  font-size: 16px;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n\"])));const TableContainer=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  margin: 16px 0;\\n  overflow-x: auto;\\n  border-radius: 12px;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n  background: white;\\n  border: 1px solid #e2e8f0;\\n\"])));const TableHeader=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  padding: 16px 20px;\\n  background: linear-gradient(135deg, #f8f9fa 0%, #edf2f7 100%);\\n  border-bottom: 1px solid #e2e8f0;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  border-radius: 12px 12px 0 0;\\n\"])));const TableTitle=styled.h5(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  color: #2d3748;\\n  margin: 0;\\n  font-weight: 600;\\n  font-size: 14px;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n\"])));const DownloadButton=styled.button(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  padding: 8px 16px;\\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\\n  color: white;\\n  border: none;\\n  border-radius: 8px;\\n  cursor: pointer;\\n  font-size: 0.8rem;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  font-weight: 500;\\n  transition: all 0.2s ease;\\n  \\n  &:hover {\\n    transform: translateY(-1px);\\n    box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);\\n  }\\n  \\n  &:active {\\n    transform: translateY(0);\\n  }\\n\"])));const Table=styled.table(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  border-collapse: collapse;\\n  width: 100%;\\n  font-size: 0.9rem;\\n  background: white;\\n\"])));const Th=styled.th(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  border: 1px solid #e2e8f0;\\n  padding: 12px 16px;\\n  text-align: left;\\n  background: #f8f9fa;\\n  font-weight: 600;\\n  color: #4a5568;\\n  font-size: 13px;\\n\"])));const Td=styled.td(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  border: 1px solid #e2e8f0;\\n  padding: 12px 16px;\\n  color: #4a5568;\\n  font-size: 13px;\\n\"])));const PlotContainer=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  background: linear-gradient(135deg, #f8f9fa 0%, #edf2f7 100%);\\n  padding: 24px;\\n  border-radius: 12px;\\n  margin-top: 16px;\\n  text-align: center;\\n  border: 1px solid #e2e8f0;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n\"])));const PlotTitle=styled.h5(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  margin: 0 0 16px 0;\\n  color: #2d3748;\\n  font-weight: 600;\\n  font-size: 16px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 8px;\\n\"])));const PlotImage=styled.img(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  max-width: 100%;\\n  height: auto;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\\n  margin-bottom: 16px;\\n  border: 1px solid #e2e8f0;\\n\"])));const EmptyPlot=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 200px;\\n  background: white;\\n  border: 2px dashed #e2e8f0;\\n  border-radius: 8px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: #718096;\\n  font-style: italic;\\n  margin-bottom: 16px;\\n\"])));const PlotDownloadButton=styled.button(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  padding: 10px 20px;\\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\\n  color: white;\\n  border: none;\\n  border-radius: 8px;\\n  cursor: pointer;\\n  font-size: 0.9rem;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-weight: 500;\\n  transition: all 0.2s ease;\\n  margin: 0 auto;\\n  \\n  &:hover {\\n    transform: translateY(-1px);\\n    box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);\\n  }\\n  \\n  &:active {\\n    transform: translateY(0);\\n  }\\n\"])));const NoDataMessage=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 20px;\\n  color: #718096;\\n  font-style: italic;\\n  background: #f8f9fa;\\n  border-radius: 8px;\\n  border: 1px dashed #e2e8f0;\\n\"])));function ChatMessage(_ref){let{message}=_ref;const isUser=message.type==='user';// Debug logging for plot data\nif(!isUser&&(message.plot||message.plot_code)){var _message$plot,_message$plot_code,_message$plot_code2;console.log('📊 Plot data in message:',{hasPlot:!!message.plot,plotLength:((_message$plot=message.plot)===null||_message$plot===void 0?void 0:_message$plot.length)||0,hasPlotCode:!!message.plot_code,plotCodeLength:((_message$plot_code=message.plot_code)===null||_message$plot_code===void 0?void 0:_message$plot_code.length)||0,plotCodePreview:((_message$plot_code2=message.plot_code)===null||_message$plot_code2===void 0?void 0:_message$plot_code2.substring(0,100))+'...'});}const downloadTableAsCSV=(table,index)=>{const headers=table.headers.join(',');// Handle both array format and object format\nconst rows=table.data.map(row=>{if(Array.isArray(row)){// If row is an array, join it directly\nreturn row.join(',');}else{// If row is an object, extract values based on headers\nreturn table.headers.map(header=>{const value=row[header];// Handle values that might contain commas by wrapping in quotes\nif(typeof value==='string'&&value.includes(',')){return\"\\\"\".concat(value,\"\\\"\");}return value||'';}).join(',');}}).join('\\n');const csv=\"\".concat(headers,\"\\n\").concat(rows);const blob=new Blob([csv],{type:'text/csv'});const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"table_\".concat(index+1,\"_\").concat(Date.now(),\".csv\");a.click();window.URL.revokeObjectURL(url);};const downloadPlotAsPNG=plotImage=>{const link=document.createElement('a');link.href=\"data:image/png;base64,\".concat(plotImage);link.download=\"plot_\".concat(Date.now(),\".png\");link.click();};return/*#__PURE__*/_jsx(MessageContainer,{isUser:isUser,children:/*#__PURE__*/_jsxs(MessageWrapper,{isUser:isUser,children:[/*#__PURE__*/_jsx(Avatar,{type:message.type,children:isUser?/*#__PURE__*/_jsx(User,{size:20}):/*#__PURE__*/_jsx(Bot,{size:20})}),/*#__PURE__*/_jsxs(MessageContent,{isUser:isUser,children:[/*#__PURE__*/_jsxs(MessageHeader,{isUser:isUser,children:[/*#__PURE__*/_jsx(MessageAuthor,{isUser:isUser,children:isUser?'You':'TONIC AI Assistant'}),/*#__PURE__*/_jsxs(MessageTime,{isUser:isUser,children:[/*#__PURE__*/_jsx(Clock,{size:12}),message.timestamp]})]}),/*#__PURE__*/_jsx(MessageText,{isUser:isUser,children:isUser?/*#__PURE__*/_jsx(\"p\",{children:message.q}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ReactMarkdown,{children:message.a}),message.tables&&message.tables.length>0||message.plot?/*#__PURE__*/_jsxs(VisualizationSection,{children:[message.tables&&message.tables.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(SectionTitle,{children:[/*#__PURE__*/_jsx(TableIcon,{size:18}),\"Extracted Tables (\",message.tables.length,\")\"]}),message.tables.map((tableData,index)=>{// Handle both old format (headers/data) and new format (array of objects)\nconst headers=tableData.headers||Object.keys(tableData[0]||{});const data=tableData.data||tableData;return/*#__PURE__*/_jsxs(TableContainer,{children:[/*#__PURE__*/_jsxs(TableHeader,{children:[/*#__PURE__*/_jsxs(TableTitle,{children:[/*#__PURE__*/_jsx(TableIcon,{size:16}),\"Table \",index+1]}),/*#__PURE__*/_jsxs(DownloadButton,{onClick:()=>downloadTableAsCSV({headers,data},index),children:[/*#__PURE__*/_jsx(Download,{size:14}),\"Download CSV\"]})]}),/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:headers.map((header,i)=>/*#__PURE__*/_jsx(Th,{children:header},i))})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((row,i)=>/*#__PURE__*/_jsx(\"tr\",{children:Array.isArray(row)?row.map((cell,j)=>/*#__PURE__*/_jsx(Td,{children:cell},j)):headers.map((header,j)=>/*#__PURE__*/_jsx(Td,{children:row[header]||''},j))},i))})]})]},index);})]}),(message.plot||message.plot_code)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(SectionTitle,{children:[/*#__PURE__*/_jsx(BarChart3,{size:18}),\"Generated Visualization\"]}),message.plot_code&&/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(ChartRenderer,{plotCode:message.plot_code,title:\"Interactive Data Visualization\"})}),message.plot&&!message.plot_code&&/*#__PURE__*/_jsxs(PlotContainer,{children:[/*#__PURE__*/_jsxs(PlotTitle,{children:[/*#__PURE__*/_jsx(BarChart3,{size:16}),\"Data Visualization\"]}),/*#__PURE__*/_jsx(PlotImage,{src:\"data:image/png;base64,\".concat(message.plot),alt:\"Generated Plot\"}),/*#__PURE__*/_jsxs(PlotDownloadButton,{onClick:()=>downloadPlotAsPNG(message.plot),children:[/*#__PURE__*/_jsx(Download,{size:16}),\"Download Plot as PNG\"]})]})]})]}):null]})})]})]})});}export default ChatMessage;","map":{"version":3,"names":["React","ReactMarkdown","User","Bot","Clock","Download","BarChart3","Table","TableIcon","styled","ChartRenderer","ErrorBoundary","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MessageContainer","div","_templateObject","_taggedTemplateLiteral","props","isUser","MessageWrapper","_templateObject2","Avatar","_templateObject3","type","MessageContent","_templateObject4","MessageHeader","_templateObject5","MessageAuthor","span","_templateObject6","MessageTime","_templateObject7","MessageText","_templateObject8","VisualizationSection","_templateObject9","SectionTitle","h4","_templateObject0","TableContainer","_templateObject1","TableHeader","_templateObject10","TableTitle","h5","_templateObject11","DownloadButton","button","_templateObject12","table","_templateObject13","Th","th","_templateObject14","Td","td","_templateObject15","PlotContainer","_templateObject16","PlotTitle","_templateObject17","PlotImage","img","_templateObject18","EmptyPlot","_templateObject19","PlotDownloadButton","_templateObject20","NoDataMessage","_templateObject21","ChatMessage","_ref","message","plot","plot_code","_message$plot","_message$plot_code","_message$plot_code2","console","log","hasPlot","plotLength","length","hasPlotCode","plotCodeLength","plotCodePreview","substring","downloadTableAsCSV","index","headers","join","rows","data","map","row","Array","isArray","header","value","includes","concat","csv","blob","Blob","url","window","URL","createObjectURL","a","document","createElement","href","download","Date","now","click","revokeObjectURL","downloadPlotAsPNG","plotImage","link","children","size","timestamp","q","tables","tableData","Object","keys","onClick","i","cell","j","plotCode","title","src","alt"],"sources":["/home/shubham/Documents/Personal/my-project/react-app/src/components/ChatMessage.js"],"sourcesContent":["import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { User, Bot, Clock, Download, BarChart3, Table as TableIcon } from 'lucide-react';\nimport styled from 'styled-components';\nimport ChartRenderer from './ChartRenderer';\nimport ErrorBoundary from './ErrorBoundary';\n\nconst MessageContainer = styled.div`\n  display: flex;\n  justify-content: ${props => props.isUser ? 'flex-end' : 'flex-start'};\n  margin-bottom: 20px;\n  padding: 0 20px;\n  width: 100%;\n`;\n\nconst MessageWrapper = styled.div`\n  max-width: 70%;\n  display: flex;\n  gap: 12px;\n  align-items: flex-start;\n  flex-direction: ${props => props.isUser ? 'row-reverse' : 'row'};\n`;\n\nconst Avatar = styled.div`\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  font-weight: bold;\n  color: white;\n  \n  ${props => props.type === 'user' && `\n    background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\n  `}\n  \n  ${props => props.type === 'ai' && `\n    background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);\n  `}\n`;\n\nconst MessageContent = styled.div`\n  background: ${props => props.isUser ? 'linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%)' : 'white'};\n  color: ${props => props.isUser ? 'white' : '#4a5568'};\n  border-radius: 18px;\n  padding: 16px 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid ${props => props.isUser ? 'transparent' : '#e2e8f0'};\n  max-width: 100%;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  position: relative;\n  \n  ${props => props.isUser && `\n    border-bottom-right-radius: 6px;\n  `}\n  \n  ${props => !props.isUser && `\n    border-bottom-left-radius: 6px;\n  `}\n`;\n\nconst MessageHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n  padding-bottom: 4px;\n  border-bottom: 1px solid ${props => props.isUser ? 'rgba(255, 255, 255, 0.2)' : '#f1f5f9'};\n`;\n\nconst MessageAuthor = styled.span`\n  font-weight: 600;\n  color: ${props => props.isUser ? 'white' : '#2d3748'};\n  font-size: 14px;\n`;\n\nconst MessageTime = styled.span`\n  font-size: 0.8rem;\n  color: ${props => props.isUser ? 'rgba(255, 255, 255, 0.8)' : '#718096'};\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n\nconst MessageText = styled.div`\n  color: ${props => props.isUser ? 'white' : '#4a5568'};\n  line-height: 1.7;\n  font-size: 15px;\n  \n  p {\n    margin: 0 0 16px 0;\n    \n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n  \n  h1, h2, h3, h4, h5, h6 {\n    color: ${props => props.isUser ? 'white' : '#2d3748'};\n    margin: 20px 0 12px 0;\n    font-weight: 600;\n  }\n  \n  h1 { font-size: 1.8rem; }\n  h2 { font-size: 1.6rem; }\n  h3 { font-size: 1.4rem; }\n  h4 { font-size: 1.2rem; }\n  h5 { font-size: 1.1rem; }\n  h6 { font-size: 1rem; }\n  \n  ul, ol {\n    margin: 12px 0;\n    padding-left: 24px;\n  }\n  \n  li {\n    margin: 6px 0;\n  }\n  \n  blockquote {\n    border-left: 4px solid ${props => props.isUser ? 'rgba(255, 255, 255, 0.6)' : '#FF6B35'};\n    padding-left: 16px;\n    margin: 16px 0;\n    color: ${props => props.isUser ? 'rgba(255, 255, 255, 0.9)' : '#718096'};\n    font-style: italic;\n  }\n  \n  code {\n    background: ${props => props.isUser ? 'rgba(255, 255, 255, 0.2)' : '#f8f9fa'};\n    padding: 2px 6px;\n    border-radius: 4px;\n    font-family: 'Courier New', monospace;\n    font-size: 0.9rem;\n    color: ${props => props.isUser ? 'white' : '#e53e3e'};\n  }\n  \n  pre {\n    background: ${props => props.isUser ? 'rgba(255, 255, 255, 0.1)' : '#f8f9fa'};\n    padding: 16px;\n    border-radius: 8px;\n    overflow-x: auto;\n    margin: 16px 0;\n    border: 1px solid ${props => props.isUser ? 'rgba(255, 255, 255, 0.2)' : '#e2e8f0'};\n    \n    code {\n      background: none;\n      padding: 0;\n      color: ${props => props.isUser ? 'white' : '#4a5568'};\n    }\n  }\n  \n  table {\n    border-collapse: collapse;\n    width: 100%;\n    margin: 16px 0;\n    font-size: 0.9rem;\n    background: ${props => props.isUser ? 'rgba(255, 255, 255, 0.1)' : 'white'};\n    border-radius: 8px;\n    overflow: hidden;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  }\n  \n  th, td {\n    border: 1px solid ${props => props.isUser ? 'rgba(255, 255, 255, 0.2)' : '#e2e8f0'};\n    padding: 12px;\n    text-align: left;\n  }\n  \n  th {\n    background: ${props => props.isUser ? 'rgba(255, 255, 255, 0.2)' : '#f8f9fa'};\n    font-weight: 600;\n    color: ${props => props.isUser ? 'white' : '#4a5568'};\n  }\n  \n  tr:nth-child(even) {\n    background: ${props => props.isUser ? 'rgba(255, 255, 255, 0.05)' : '#f8f9fa'};\n  }\n  \n  tr:hover {\n    background: ${props => props.isUser ? 'rgba(255, 255, 255, 0.1)' : '#edf2f7'};\n  }\n`;\n\nconst VisualizationSection = styled.div`\n  margin-top: 20px;\n  border-top: 1px solid #e2e8f0;\n  padding-top: 16px;\n`;\n\nconst SectionTitle = styled.h4`\n  color: #2d3748;\n  margin: 0 0 12px 0;\n  font-weight: 600;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst TableContainer = styled.div`\n  margin: 16px 0;\n  overflow-x: auto;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  background: white;\n  border: 1px solid #e2e8f0;\n`;\n\nconst TableHeader = styled.div`\n  padding: 16px 20px;\n  background: linear-gradient(135deg, #f8f9fa 0%, #edf2f7 100%);\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-radius: 12px 12px 0 0;\n`;\n\nconst TableTitle = styled.h5`\n  color: #2d3748;\n  margin: 0;\n  font-weight: 600;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n`;\n\nconst DownloadButton = styled.button`\n  padding: 8px 16px;\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.8rem;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n`;\n\nconst Table = styled.table`\n  border-collapse: collapse;\n  width: 100%;\n  font-size: 0.9rem;\n  background: white;\n`;\n\nconst Th = styled.th`\n  border: 1px solid #e2e8f0;\n  padding: 12px 16px;\n  text-align: left;\n  background: #f8f9fa;\n  font-weight: 600;\n  color: #4a5568;\n  font-size: 13px;\n`;\n\nconst Td = styled.td`\n  border: 1px solid #e2e8f0;\n  padding: 12px 16px;\n  color: #4a5568;\n  font-size: 13px;\n`;\n\nconst PlotContainer = styled.div`\n  background: linear-gradient(135deg, #f8f9fa 0%, #edf2f7 100%);\n  padding: 24px;\n  border-radius: 12px;\n  margin-top: 16px;\n  text-align: center;\n  border: 1px solid #e2e8f0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n`;\n\nconst PlotTitle = styled.h5`\n  margin: 0 0 16px 0;\n  color: #2d3748;\n  font-weight: 600;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n`;\n\nconst PlotImage = styled.img`\n  max-width: 100%;\n  height: auto;\n  border-radius: 8px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n  margin-bottom: 16px;\n  border: 1px solid #e2e8f0;\n`;\n\nconst EmptyPlot = styled.div`\n  width: 100%;\n  height: 200px;\n  background: white;\n  border: 2px dashed #e2e8f0;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #718096;\n  font-style: italic;\n  margin-bottom: 16px;\n`;\n\nconst PlotDownloadButton = styled.button`\n  padding: 10px 20px;\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  margin: 0 auto;\n  \n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n`;\n\nconst NoDataMessage = styled.div`\n  text-align: center;\n  padding: 20px;\n  color: #718096;\n  font-style: italic;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border: 1px dashed #e2e8f0;\n`;\n\nfunction ChatMessage({ message }) {\n  const isUser = message.type === 'user';\n  \n  // Debug logging for plot data\n  if (!isUser && (message.plot || message.plot_code)) {\n    console.log('📊 Plot data in message:', {\n      hasPlot: !!message.plot,\n      plotLength: message.plot?.length || 0,\n      hasPlotCode: !!message.plot_code,\n      plotCodeLength: message.plot_code?.length || 0,\n      plotCodePreview: message.plot_code?.substring(0, 100) + '...'\n    });\n  }\n  \n  const downloadTableAsCSV = (table, index) => {\n    const headers = table.headers.join(',');\n    \n    // Handle both array format and object format\n    const rows = table.data.map(row => {\n      if (Array.isArray(row)) {\n        // If row is an array, join it directly\n        return row.join(',');\n      } else {\n        // If row is an object, extract values based on headers\n        return table.headers.map(header => {\n          const value = row[header];\n          // Handle values that might contain commas by wrapping in quotes\n          if (typeof value === 'string' && value.includes(',')) {\n            return `\"${value}\"`;\n          }\n          return value || '';\n        }).join(',');\n      }\n    }).join('\\n');\n    \n    const csv = `${headers}\\n${rows}`;\n    \n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `table_${index + 1}_${Date.now()}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  };\n  \n  const downloadPlotAsPNG = (plotImage) => {\n    const link = document.createElement('a');\n    link.href = `data:image/png;base64,${plotImage}`;\n    link.download = `plot_${Date.now()}.png`;\n    link.click();\n  };\n  \n  return (\n    <MessageContainer isUser={isUser}>\n      <MessageWrapper isUser={isUser}>\n        <Avatar type={message.type}>\n          {isUser ? <User size={20} /> : <Bot size={20} />}\n        </Avatar>\n        \n        <MessageContent isUser={isUser}>\n          <MessageHeader isUser={isUser}>\n            <MessageAuthor isUser={isUser}>\n              {isUser ? 'You' : 'TONIC AI Assistant'}\n            </MessageAuthor>\n            <MessageTime isUser={isUser}>\n              <Clock size={12} />\n              {message.timestamp}\n            </MessageTime>\n          </MessageHeader>\n          \n          <MessageText isUser={isUser}>\n            {isUser ? (\n              <p>{message.q}</p>\n            ) : (\n              <>\n                <ReactMarkdown>{message.a}</ReactMarkdown>\n                \n                {/* Show visualizations if available */}\n                {(message.tables && message.tables.length > 0) || message.plot ? (\n                  <VisualizationSection>\n                    {/* Tables Section */}\n                    {message.tables && message.tables.length > 0 && (\n                      <>\n                        <SectionTitle>\n                          <TableIcon size={18} />\n                          Extracted Tables ({message.tables.length})\n                        </SectionTitle>\n                        {message.tables.map((tableData, index) => {\n                          // Handle both old format (headers/data) and new format (array of objects)\n                          const headers = tableData.headers || Object.keys(tableData[0] || {});\n                          const data = tableData.data || tableData;\n                          \n                          return (\n                            <TableContainer key={index}>\n                              <TableHeader>\n                                <TableTitle>\n                                  <TableIcon size={16} />\n                                  Table {index + 1}\n                                </TableTitle>\n                                <DownloadButton onClick={() => downloadTableAsCSV({ headers, data }, index)}>\n                                  <Download size={14} />\n                                  Download CSV\n                                </DownloadButton>\n                              </TableHeader>\n                              <Table>\n                                <thead>\n                                  <tr>\n                                    {headers.map((header, i) => (\n                                      <Th key={i}>{header}</Th>\n                                    ))}\n                                  </tr>\n                                </thead>\n                                <tbody>\n                                  {data.map((row, i) => (\n                                    <tr key={i}>\n                                      {Array.isArray(row) ? \n                                        row.map((cell, j) => (\n                                          <Td key={j}>{cell}</Td>\n                                        )) :\n                                        headers.map((header, j) => (\n                                          <Td key={j}>{row[header] || ''}</Td>\n                                        ))\n                                      }\n                                    </tr>\n                                  ))}\n                                </tbody>\n                              </Table>\n                            </TableContainer>\n                          );\n                        })}\n                      </>\n                    )}\n                    \n                    {/* Plot Section */}\n                    {(message.plot || message.plot_code) && (\n                      <>\n                        <SectionTitle>\n                          <BarChart3 size={18} />\n                          Generated Visualization\n                        </SectionTitle>\n                        \n                        {/* Use ChartRenderer for interactive charts */}\n                        {message.plot_code && (\n                          <ErrorBoundary>\n                            <ChartRenderer \n                              plotCode={message.plot_code} \n                              title=\"Interactive Data Visualization\"\n                            />\n                          </ErrorBoundary>\n                        )}\n                        \n                        {/* Fallback to base64 image if available */}\n                        {message.plot && !message.plot_code && (\n                          <PlotContainer>\n                            <PlotTitle>\n                              <BarChart3 size={16} />\n                              Data Visualization\n                            </PlotTitle>\n                            <PlotImage \n                              src={`data:image/png;base64,${message.plot}`} \n                              alt=\"Generated Plot\"\n                            />\n                            <PlotDownloadButton onClick={() => downloadPlotAsPNG(message.plot)}>\n                              <Download size={16} />\n                              Download Plot as PNG\n                            </PlotDownloadButton>\n                          </PlotContainer>\n                        )}\n                      </>\n                    )}\n                  </VisualizationSection>\n                ) : null}\n              </>\n            )}\n          </MessageText>\n        </MessageContent>\n      </MessageWrapper>\n    </MessageContainer>\n  );\n}\n\nexport default ChatMessage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}