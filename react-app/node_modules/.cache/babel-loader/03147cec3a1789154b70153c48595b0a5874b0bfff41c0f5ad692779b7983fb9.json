{"ast":null,"code":"var _jsxFileName = \"/home/shubham/Documents/Personal/my-project/react-app/src/components/ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport FileUpload from './FileUpload';\nimport ChatMessage from './ChatMessage';\nimport { Send, Paperclip } from 'lucide-react';\nimport styled from 'styled-components';\nimport toast from 'react-hot-toast';\nimport { fileAPI, chatAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 105px);\n  background: #f7fafc;\n`;\n_c = ChatContainer;\nconst FileUploadSection = styled.div`\n  margin: 20px;\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e2e8f0;\n`;\n_c2 = FileUploadSection;\nconst ChatSection = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  min-height: 0;\n`;\n_c3 = ChatSection;\nconst MessagesContainer = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  background: #f7fafc;\n  min-height: 0;\n  max-height: calc(100vh - 200px);\n`;\n_c4 = MessagesContainer;\nconst InputSection = styled.div`\n  padding: 20px;\n  background: white;\n  border-top: 1px solid #e2e8f0;\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n  position: sticky;\n  bottom: 0;\n  z-index: 10;\n  flex-shrink: 0;\n  transition: all 0.2s ease;\n`;\n_c5 = InputSection;\nconst InputForm = styled.form`\n  display: flex;\n  gap: 12px;\n  align-items: flex-end;\n`;\n_c6 = InputForm;\nconst InputWrapper = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: flex-end;\n  gap: 8px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 12px;\n  padding: 8px;\n  transition: all 0.2s ease;\n  \n  &:focus-within {\n    border-color: #FF6B35;\n    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);\n  }\n`;\n_c7 = InputWrapper;\nconst UploadButton = styled.button`\n  background: none;\n  border: none;\n  padding: 8px;\n  border-radius: 8px;\n  cursor: pointer;\n  color: #718096;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    background: #f7fafc;\n    color: #FF6B35;\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n_c8 = UploadButton;\nconst HiddenFileInput = styled.input`\n  display: none;\n`;\n_c9 = HiddenFileInput;\nconst TextArea = styled.textarea`\n  flex: 1;\n  padding: 16px;\n  border: 1px solid #e2e8f0;\n  border-radius: 12px;\n  font-size: 16px;\n  font-family: inherit;\n  resize: none;\n  min-height: 60px;\n  max-height: 200px;\n  background: white;\n  transition: all 0.2s ease;\n  overflow-y: auto;\n  line-height: 1.5;\n  \n  &:focus {\n    outline: none;\n    border-color: #FF6B35;\n    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);\n  }\n  \n  &::placeholder {\n    color: #a0aec0;\n  }\n`;\n_c0 = TextArea;\nconst SendButton = styled.button`\n  padding: 16px 24px;\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  font-size: 14px;\n  \n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);\n  }\n  \n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n_c1 = SendButton;\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  color: #718096;\n  \n  h3 {\n    margin-bottom: 12px;\n    color: #4a5568;\n    font-weight: 600;\n  }\n  \n  p {\n    margin-bottom: 20px;\n    font-size: 16px;\n  }\n`;\n_c10 = EmptyState;\nconst LoadingContainer = styled.div`\n  text-align: center;\n  padding: 40px 20px;\n  color: #718096;\n  \n  .spinner {\n    margin: 0 auto 16px auto;\n  }\n  \n  p {\n    font-size: 16px;\n    margin: 0;\n  }\n`;\n_c11 = LoadingContainer;\nconst KnowledgeBaseStatus = styled.div`\n  margin: 20px;\n  padding: 16px;\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e2e8f0;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n`;\n_c12 = KnowledgeBaseStatus;\nconst StatusHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n`;\n_c13 = StatusHeader;\nconst StatusTitle = styled.h4`\n  color: #2d3748;\n  margin: 0;\n  font-weight: 600;\n  font-size: 16px;\n`;\n_c14 = StatusTitle;\nconst ClearButton = styled.button`\n  padding: 6px 12px;\n  background: #e53e3e;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 12px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #c53030;\n  }\n`;\n_c15 = ClearButton;\nconst StatusText = styled.p`\n  color: #718096;\n  margin: 0;\n  font-size: 14px;\n`;\n_c16 = StatusText;\nfunction ChatInterface({\n  currentSession,\n  sessions,\n  setSessions\n}) {\n  _s();\n  const [userInput, setUserInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isUploading, setIsUploading] = useState(false);\n  const [knowledgeBase, setKnowledgeBase] = useState('');\n  const [showFileUpload, setShowFileUpload] = useState(false);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  // Auto-resize textarea function\n  const adjustTextareaHeight = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      const newHeight = Math.min(textarea.scrollHeight, 200);\n      textarea.style.height = `${newHeight}px`;\n    }\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [sessions[currentSession]]);\n\n  // Adjust textarea height when userInput changes\n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [userInput]);\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!userInput.trim() || isLoading) return;\n    const question = userInput.trim();\n    setUserInput('');\n    setIsLoading(true);\n\n    // Add user message to session\n    const userMessage = {\n      q: question,\n      a: '',\n      timestamp: new Date().toLocaleString(),\n      type: 'user'\n    };\n    setSessions(prev => ({\n      ...prev,\n      [currentSession]: [...prev[currentSession], userMessage]\n    }));\n    try {\n      var _sessions$currentSess;\n      console.log('Sending message to API:', {\n        question,\n        knowledgeBase: knowledgeBase ? 'Present' : 'Empty',\n        sessionMessages: ((_sessions$currentSess = sessions[currentSession]) === null || _sessions$currentSess === void 0 ? void 0 : _sessions$currentSess.length) || 0,\n        currentSession\n      });\n\n      // Get AI response from backend\n      const response = await chatAPI.sendMessage(question, knowledgeBase, sessions[currentSession], currentSession);\n      if (response.success) {\n        var _response$response, _response$tables, _response$plot, _response$plot_code, _response$sources;\n        // Add AI response as a separate message\n        const aiMessage = {\n          q: '',\n          a: response.response,\n          timestamp: response.timestamp,\n          type: 'ai',\n          tables: response.tables || [],\n          plot: response.plot,\n          plot_code: response.plot_code,\n          sources: response.sources\n        };\n\n        // Debug logging\n        console.log('ðŸ¤– AI Response received:', {\n          responseLength: (_response$response = response.response) === null || _response$response === void 0 ? void 0 : _response$response.length,\n          tablesCount: ((_response$tables = response.tables) === null || _response$tables === void 0 ? void 0 : _response$tables.length) || 0,\n          hasPlot: !!response.plot,\n          plotLength: ((_response$plot = response.plot) === null || _response$plot === void 0 ? void 0 : _response$plot.length) || 0,\n          hasPlotCode: !!response.plot_code,\n          plotCodeLength: ((_response$plot_code = response.plot_code) === null || _response$plot_code === void 0 ? void 0 : _response$plot_code.length) || 0,\n          sourcesCount: ((_response$sources = response.sources) === null || _response$sources === void 0 ? void 0 : _response$sources.length) || 0\n        });\n\n        // Additional plot debugging\n        if (response.plot) {\n          console.log('ðŸŽ¨ Plot data received:', {\n            plotDataLength: response.plot.length,\n            plotDataPreview: response.plot.substring(0, 100) + '...'\n          });\n        }\n        if (response.plot_code) {\n          console.log('ðŸ“ Plot code received:', {\n            plotCodeLength: response.plot_code.length,\n            plotCodePreview: response.plot_code.substring(0, 200) + '...'\n          });\n        }\n        setSessions(prev => ({\n          ...prev,\n          [currentSession]: [...prev[currentSession], aiMessage]\n        }));\n      } else {\n        toast.error('Failed to get response from AI');\n      }\n    } catch (error) {\n      toast.error('Failed to get response. Please try again.');\n      console.error('Error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleFileUpload = async files => {\n    setIsUploading(true);\n    try {\n      const response = await fileAPI.upload(files);\n      if (response.success) {\n        setKnowledgeBase(response.knowledge_base);\n        toast.success(response.message);\n        setShowFileUpload(false);\n      } else {\n        toast.error('Failed to process files');\n      }\n    } catch (error) {\n      console.error('File upload error:', error);\n      toast.error('Failed to upload files. Please try again.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  const clearKnowledgeBase = () => {\n    setKnowledgeBase('');\n    toast.success('Knowledge base cleared');\n  };\n  const currentSessionMessages = sessions[currentSession] || [];\n  return /*#__PURE__*/_jsxDEV(ChatContainer, {\n    children: [showFileUpload && /*#__PURE__*/_jsxDEV(FileUploadSection, {\n      children: /*#__PURE__*/_jsxDEV(FileUpload, {\n        onFileUpload: handleFileUpload,\n        isUploading: isUploading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 9\n    }, this), knowledgeBase && /*#__PURE__*/_jsxDEV(KnowledgeBaseStatus, {\n      children: [/*#__PURE__*/_jsxDEV(StatusHeader, {\n        children: [/*#__PURE__*/_jsxDEV(StatusTitle, {\n          children: \"\\uD83D\\uDCDA Knowledge Base Active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ClearButton, {\n          onClick: clearKnowledgeBase,\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(StatusText, {\n        children: [\"Knowledge base contains \", knowledgeBase.length, \" characters\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ChatSection, {\n      children: [/*#__PURE__*/_jsxDEV(MessagesContainer, {\n        children: [currentSessionMessages.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Welcome to TONIC AI! \\uD83E\\uDD16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: knowledgeBase ? \"Start a conversation by asking a question about your uploaded documents.\" : \"Upload some documents to build your knowledge base, then start asking questions!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), !knowledgeBase && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowFileUpload(!showFileUpload),\n            style: {\n              padding: '12px 24px',\n              background: 'linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%)',\n              color: 'white',\n              border: 'none',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              fontWeight: '600'\n            },\n            children: showFileUpload ? 'Hide File Upload' : 'Upload Documents'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }, this) : currentSessionMessages.map((message, index) => /*#__PURE__*/_jsxDEV(ChatMessage, {\n          message: message\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 15\n        }, this)), isLoading && /*#__PURE__*/_jsxDEV(LoadingContainer, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner\",\n            style: {\n              width: '32px',\n              height: '32px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Generating response...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputSection, {\n        children: /*#__PURE__*/_jsxDEV(InputForm, {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(InputWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(UploadButton, {\n              type: \"button\",\n              onClick: () => document.getElementById('file-upload-input').click(),\n              children: /*#__PURE__*/_jsxDEV(Paperclip, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(HiddenFileInput, {\n              id: \"file-upload-input\",\n              type: \"file\",\n              multiple: true,\n              onChange: e => handleFileUpload(e.target.files),\n              disabled: isUploading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n              ref: textareaRef,\n              value: userInput,\n              onChange: e => setUserInput(e.target.value),\n              onInput: adjustTextareaHeight,\n              onKeyDown: handleKeyDown,\n              placeholder: knowledgeBase ? \"Ask me anything about your uploaded documents or any general question...\" : \"Upload documents first to ask questions about them...\",\n              disabled: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SendButton, {\n            type: \"submit\",\n            disabled: isLoading || !userInput.trim(),\n            children: [isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner\",\n              style: {\n                width: '20px',\n                height: '20px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Send, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this), \"Send\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 395,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatInterface, \"SAb4BSrDhEim7cFVY+EaC5WXnWk=\");\n_c17 = ChatInterface;\nexport default ChatInterface;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17;\n$RefreshReg$(_c, \"ChatContainer\");\n$RefreshReg$(_c2, \"FileUploadSection\");\n$RefreshReg$(_c3, \"ChatSection\");\n$RefreshReg$(_c4, \"MessagesContainer\");\n$RefreshReg$(_c5, \"InputSection\");\n$RefreshReg$(_c6, \"InputForm\");\n$RefreshReg$(_c7, \"InputWrapper\");\n$RefreshReg$(_c8, \"UploadButton\");\n$RefreshReg$(_c9, \"HiddenFileInput\");\n$RefreshReg$(_c0, \"TextArea\");\n$RefreshReg$(_c1, \"SendButton\");\n$RefreshReg$(_c10, \"EmptyState\");\n$RefreshReg$(_c11, \"LoadingContainer\");\n$RefreshReg$(_c12, \"KnowledgeBaseStatus\");\n$RefreshReg$(_c13, \"StatusHeader\");\n$RefreshReg$(_c14, \"StatusTitle\");\n$RefreshReg$(_c15, \"ClearButton\");\n$RefreshReg$(_c16, \"StatusText\");\n$RefreshReg$(_c17, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useRef","useEffect","FileUpload","ChatMessage","Send","Paperclip","styled","toast","fileAPI","chatAPI","jsxDEV","_jsxDEV","ChatContainer","div","_c","FileUploadSection","_c2","ChatSection","_c3","MessagesContainer","_c4","InputSection","_c5","InputForm","form","_c6","InputWrapper","_c7","UploadButton","button","_c8","HiddenFileInput","input","_c9","TextArea","textarea","_c0","SendButton","_c1","EmptyState","_c10","LoadingContainer","_c11","KnowledgeBaseStatus","_c12","StatusHeader","_c13","StatusTitle","h4","_c14","ClearButton","_c15","StatusText","p","_c16","ChatInterface","currentSession","sessions","setSessions","_s","userInput","setUserInput","isLoading","setIsLoading","isUploading","setIsUploading","knowledgeBase","setKnowledgeBase","showFileUpload","setShowFileUpload","messagesEndRef","textareaRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","adjustTextareaHeight","style","height","newHeight","Math","min","scrollHeight","handleKeyDown","e","key","shiftKey","preventDefault","handleSubmit","trim","question","userMessage","q","a","timestamp","Date","toLocaleString","type","prev","_sessions$currentSess","console","log","sessionMessages","length","response","sendMessage","success","_response$response","_response$tables","_response$plot","_response$plot_code","_response$sources","aiMessage","tables","plot","plot_code","sources","responseLength","tablesCount","hasPlot","plotLength","hasPlotCode","plotCodeLength","sourcesCount","plotDataLength","plotDataPreview","substring","plotCodePreview","error","handleFileUpload","files","upload","knowledge_base","message","clearKnowledgeBase","currentSessionMessages","children","onFileUpload","fileName","_jsxFileName","lineNumber","columnNumber","onClick","padding","background","color","border","borderRadius","cursor","fontWeight","map","index","className","width","ref","onSubmit","document","getElementById","click","size","id","multiple","onChange","target","disabled","value","onInput","onKeyDown","placeholder","_c17","$RefreshReg$"],"sources":["/home/shubham/Documents/Personal/my-project/react-app/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport FileUpload from './FileUpload';\nimport ChatMessage from './ChatMessage';\nimport { Send, Paperclip } from 'lucide-react';\nimport styled from 'styled-components';\nimport toast from 'react-hot-toast';\nimport { fileAPI, chatAPI } from '../services/api';\n\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 105px);\n  background: #f7fafc;\n`;\n\nconst FileUploadSection = styled.div`\n  margin: 20px;\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e2e8f0;\n`;\n\nconst ChatSection = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  min-height: 0;\n`;\n\nconst MessagesContainer = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  background: #f7fafc;\n  min-height: 0;\n  max-height: calc(100vh - 200px);\n`;\n\nconst InputSection = styled.div`\n  padding: 20px;\n  background: white;\n  border-top: 1px solid #e2e8f0;\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n  position: sticky;\n  bottom: 0;\n  z-index: 10;\n  flex-shrink: 0;\n  transition: all 0.2s ease;\n`;\n\nconst InputForm = styled.form`\n  display: flex;\n  gap: 12px;\n  align-items: flex-end;\n`;\n\nconst InputWrapper = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: flex-end;\n  gap: 8px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 12px;\n  padding: 8px;\n  transition: all 0.2s ease;\n  \n  &:focus-within {\n    border-color: #FF6B35;\n    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);\n  }\n`;\n\nconst UploadButton = styled.button`\n  background: none;\n  border: none;\n  padding: 8px;\n  border-radius: 8px;\n  cursor: pointer;\n  color: #718096;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    background: #f7fafc;\n    color: #FF6B35;\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst HiddenFileInput = styled.input`\n  display: none;\n`;\n\nconst TextArea = styled.textarea`\n  flex: 1;\n  padding: 16px;\n  border: 1px solid #e2e8f0;\n  border-radius: 12px;\n  font-size: 16px;\n  font-family: inherit;\n  resize: none;\n  min-height: 60px;\n  max-height: 200px;\n  background: white;\n  transition: all 0.2s ease;\n  overflow-y: auto;\n  line-height: 1.5;\n  \n  &:focus {\n    outline: none;\n    border-color: #FF6B35;\n    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);\n  }\n  \n  &::placeholder {\n    color: #a0aec0;\n  }\n`;\n\nconst SendButton = styled.button`\n  padding: 16px 24px;\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  font-size: 14px;\n  \n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);\n  }\n  \n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  color: #718096;\n  \n  h3 {\n    margin-bottom: 12px;\n    color: #4a5568;\n    font-weight: 600;\n  }\n  \n  p {\n    margin-bottom: 20px;\n    font-size: 16px;\n  }\n`;\n\nconst LoadingContainer = styled.div`\n  text-align: center;\n  padding: 40px 20px;\n  color: #718096;\n  \n  .spinner {\n    margin: 0 auto 16px auto;\n  }\n  \n  p {\n    font-size: 16px;\n    margin: 0;\n  }\n`;\n\nconst KnowledgeBaseStatus = styled.div`\n  margin: 20px;\n  padding: 16px;\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e2e8f0;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n`;\n\nconst StatusHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n`;\n\nconst StatusTitle = styled.h4`\n  color: #2d3748;\n  margin: 0;\n  font-weight: 600;\n  font-size: 16px;\n`;\n\nconst ClearButton = styled.button`\n  padding: 6px 12px;\n  background: #e53e3e;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 12px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #c53030;\n  }\n`;\n\nconst StatusText = styled.p`\n  color: #718096;\n  margin: 0;\n  font-size: 14px;\n`;\n\nfunction ChatInterface({ currentSession, sessions, setSessions }) {\n  const [userInput, setUserInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isUploading, setIsUploading] = useState(false);\n  const [knowledgeBase, setKnowledgeBase] = useState('');\n  const [showFileUpload, setShowFileUpload] = useState(false);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  // Auto-resize textarea function\n  const adjustTextareaHeight = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      const newHeight = Math.min(textarea.scrollHeight, 200);\n      textarea.style.height = `${newHeight}px`;\n    }\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [sessions[currentSession]]);\n\n  // Adjust textarea height when userInput changes\n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [userInput]);\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!userInput.trim() || isLoading) return;\n\n    const question = userInput.trim();\n    setUserInput('');\n    setIsLoading(true);\n\n    // Add user message to session\n    const userMessage = {\n      q: question,\n      a: '',\n      timestamp: new Date().toLocaleString(),\n      type: 'user'\n    };\n\n    setSessions(prev => ({\n      ...prev,\n      [currentSession]: [...prev[currentSession], userMessage]\n    }));\n\n    try {\n      console.log('Sending message to API:', {\n        question,\n        knowledgeBase: knowledgeBase ? 'Present' : 'Empty',\n        sessionMessages: sessions[currentSession]?.length || 0,\n        currentSession\n      });\n      \n      // Get AI response from backend\n      const response = await chatAPI.sendMessage(\n        question, \n        knowledgeBase, \n        sessions[currentSession], \n        currentSession\n      );\n      \n      if (response.success) {\n        // Add AI response as a separate message\n        const aiMessage = {\n          q: '',\n          a: response.response,\n          timestamp: response.timestamp,\n          type: 'ai',\n          tables: response.tables || [],\n          plot: response.plot,\n          plot_code: response.plot_code,\n          sources: response.sources\n        };\n\n        // Debug logging\n        console.log('ðŸ¤– AI Response received:', {\n          responseLength: response.response?.length,\n          tablesCount: response.tables?.length || 0,\n          hasPlot: !!response.plot,\n          plotLength: response.plot?.length || 0,\n          hasPlotCode: !!response.plot_code,\n          plotCodeLength: response.plot_code?.length || 0,\n          sourcesCount: response.sources?.length || 0\n        });\n        \n        // Additional plot debugging\n        if (response.plot) {\n          console.log('ðŸŽ¨ Plot data received:', {\n            plotDataLength: response.plot.length,\n            plotDataPreview: response.plot.substring(0, 100) + '...'\n          });\n        }\n        \n        if (response.plot_code) {\n          console.log('ðŸ“ Plot code received:', {\n            plotCodeLength: response.plot_code.length,\n            plotCodePreview: response.plot_code.substring(0, 200) + '...'\n          });\n        }\n\n        setSessions(prev => ({\n          ...prev,\n          [currentSession]: [...prev[currentSession], aiMessage]\n        }));\n\n      } else {\n        toast.error('Failed to get response from AI');\n      }\n\n    } catch (error) {\n      toast.error('Failed to get response. Please try again.');\n      console.error('Error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (files) => {\n    setIsUploading(true);\n    try {\n      const response = await fileAPI.upload(files);\n      if (response.success) {\n        setKnowledgeBase(response.knowledge_base);\n        toast.success(response.message);\n        setShowFileUpload(false);\n      } else {\n        toast.error('Failed to process files');\n      }\n    } catch (error) {\n      console.error('File upload error:', error);\n      toast.error('Failed to upload files. Please try again.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const clearKnowledgeBase = () => {\n    setKnowledgeBase('');\n    toast.success('Knowledge base cleared');\n  };\n\n  const currentSessionMessages = sessions[currentSession] || [];\n\n  return (\n    <ChatContainer>\n      {showFileUpload && (\n        <FileUploadSection>\n          <FileUpload onFileUpload={handleFileUpload} isUploading={isUploading} />\n        </FileUploadSection>\n      )}\n\n      {knowledgeBase && (\n        <KnowledgeBaseStatus>\n          <StatusHeader>\n            <StatusTitle>ðŸ“š Knowledge Base Active</StatusTitle>\n            <ClearButton onClick={clearKnowledgeBase}>\n              Clear\n            </ClearButton>\n          </StatusHeader>\n          <StatusText>\n            Knowledge base contains {knowledgeBase.length} characters\n          </StatusText>\n        </KnowledgeBaseStatus>\n      )}\n\n      <ChatSection>\n        <MessagesContainer>\n          {currentSessionMessages.length === 0 ? (\n            <EmptyState>\n              <h3>Welcome to TONIC AI! ðŸ¤–</h3>\n              <p>\n                {knowledgeBase \n                  ? \"Start a conversation by asking a question about your uploaded documents.\"\n                  : \"Upload some documents to build your knowledge base, then start asking questions!\"\n                }\n              </p>\n              {!knowledgeBase && (\n                <button \n                  onClick={() => setShowFileUpload(!showFileUpload)}\n                  style={{\n                    padding: '12px 24px',\n                    background: 'linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%)',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '8px',\n                    cursor: 'pointer',\n                    fontWeight: '600'\n                  }}\n                >\n                  {showFileUpload ? 'Hide File Upload' : 'Upload Documents'}\n                </button>\n              )}\n            </EmptyState>\n          ) : (\n            currentSessionMessages.map((message, index) => (\n              <ChatMessage key={index} message={message} />\n            ))\n          )}\n          \n          {isLoading && (\n            <LoadingContainer>\n              <div className=\"spinner\" style={{ width: '32px', height: '32px' }}></div>\n              <p>Generating response...</p>\n            </LoadingContainer>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </MessagesContainer>\n\n        <InputSection>\n          <InputForm onSubmit={handleSubmit}>\n            <InputWrapper>\n              <UploadButton type=\"button\" onClick={() => document.getElementById('file-upload-input').click()}>\n                <Paperclip size={20} />\n              </UploadButton>\n              <HiddenFileInput\n                id=\"file-upload-input\"\n                type=\"file\"\n                multiple\n                onChange={(e) => handleFileUpload(e.target.files)}\n                disabled={isUploading}\n              />\n              <TextArea\n                ref={textareaRef}\n                value={userInput}\n                onChange={(e) => setUserInput(e.target.value)}\n                onInput={adjustTextareaHeight}\n                onKeyDown={handleKeyDown}\n                placeholder={\n                  knowledgeBase \n                    ? \"Ask me anything about your uploaded documents or any general question...\"\n                    : \"Upload documents first to ask questions about them...\"\n                }\n                disabled={isLoading}\n              />\n            </InputWrapper>\n            <SendButton type=\"submit\" disabled={isLoading || !userInput.trim()}>\n              {isLoading ? (\n                <div className=\"spinner\" style={{ width: '20px', height: '20px' }}></div>\n              ) : (\n                <Send size={20} />\n              )}\n              Send\n            </SendButton>\n          </InputForm>\n          \n\n        </InputSection>\n      </ChatSection>\n    </ChatContainer>\n  );\n}\n\nexport default ChatInterface;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,WAAW,MAAM,eAAe;AACvC,SAASC,IAAI,EAAEC,SAAS,QAAQ,cAAc;AAC9C,OAAOC,MAAM,MAAM,mBAAmB;AACtC,OAAOC,KAAK,MAAM,iBAAiB;AACnC,SAASC,OAAO,EAAEC,OAAO,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,MAAMC,aAAa,GAAGN,MAAM,CAACO,GAAG;AAChC;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GALIF,aAAa;AAOnB,MAAMG,iBAAiB,GAAGT,MAAM,CAACO,GAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAPID,iBAAiB;AASvB,MAAME,WAAW,GAAGX,MAAM,CAACO,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA,CAAC;AAACK,GAAA,GANID,WAAW;AAQjB,MAAME,iBAAiB,GAAGb,MAAM,CAACO,GAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACO,GAAA,GAVID,iBAAiB;AAYvB,MAAME,YAAY,GAAGf,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACS,GAAA,GAVID,YAAY;AAYlB,MAAME,SAAS,GAAGjB,MAAM,CAACkB,IAAI;AAC7B;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAJIF,SAAS;AAMf,MAAMG,YAAY,GAAGpB,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACc,GAAA,GAfID,YAAY;AAiBlB,MAAME,YAAY,GAAGtB,MAAM,CAACuB,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GArBIF,YAAY;AAuBlB,MAAMG,eAAe,GAAGzB,MAAM,CAAC0B,KAAK;AACpC;AACA,CAAC;AAACC,GAAA,GAFIF,eAAe;AAIrB,MAAMG,QAAQ,GAAG5B,MAAM,CAAC6B,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAxBIF,QAAQ;AA0Bd,MAAMG,UAAU,GAAG/B,MAAM,CAACuB,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACS,GAAA,GAxBID,UAAU;AA0BhB,MAAME,UAAU,GAAGjC,MAAM,CAACO,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC2B,IAAA,GAfID,UAAU;AAiBhB,MAAME,gBAAgB,GAAGnC,MAAM,CAACO,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC6B,IAAA,GAbID,gBAAgB;AAetB,MAAME,mBAAmB,GAAGrC,MAAM,CAACO,GAAG;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+B,IAAA,GAPID,mBAAmB;AASzB,MAAME,YAAY,GAAGvC,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA,CAAC;AAACiC,IAAA,GALID,YAAY;AAOlB,MAAME,WAAW,GAAGzC,MAAM,CAAC0C,EAAE;AAC7B;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GALIF,WAAW;AAOjB,MAAMG,WAAW,GAAG5C,MAAM,CAACuB,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACsB,IAAA,GAdID,WAAW;AA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}