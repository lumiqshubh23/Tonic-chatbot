{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/shubham/Documents/Personal/my-project/react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26;import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{chatHistoryAPI}from'../services/api';import{LogOut,Plus,Edit3,Trash2,User,MessageSquare,Search,Download,Clock,MoreVertical,ChevronRight}from'lucide-react';import styled from'styled-components';import toast from'react-hot-toast';import ChatHistorySearch from'./ChatHistorySearch';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SidebarContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 300px;\\n  background: #202123;\\n  color: white;\\n  height: 100vh;\\n  display: flex;\\n  flex-direction: column;\\n  overflow: hidden;\\n  \\n  @media (max-width: 768px) {\\n    width: 100%;\\n    height: auto;\\n    position: relative;\\n  }\\n\"])));const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  border-bottom: 1px solid #4a4a4a;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n\"])));const NewChatButton=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 12px 16px;\\n  background: transparent;\\n  border: 1px solid #4a4a4a;\\n  border-radius: 8px;\\n  color: white;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  margin-bottom: 20px;\\n  \\n  &:hover {\\n    background: #4a4a4a;\\n  }\\n\"])));const SearchContainer=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  padding: 0 20px 20px;\\n  position: relative;\\n\"])));const SearchInput=styled.input(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 10px 12px 10px 40px;\\n  background: #404040;\\n  border: 1px solid #4a4a4a;\\n  border-radius: 8px;\\n  color: white;\\n  font-size: 14px;\\n  \\n  &::placeholder {\\n    color: #a0a0a0;\\n  }\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: #FF6B35;\\n  }\\n\"])));const SearchIcon=styled(Search)(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  left: 32px;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  color: #a0a0a0;\\n  size: 16px;\\n\"])));const SessionsContainer=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  overflow-y: auto;\\n  padding: 0 20px;\\n\"])));const SessionItem=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  padding: 12px 16px;\\n  border-radius: 8px;\\n  cursor: pointer;\\n  margin-bottom: 4px;\\n  transition: all 0.2s ease;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  position: relative;\\n  \\n  \",\"\\n  \\n  \",\"\\n\"])),props=>props.active&&\"\\n    background: #404040;\\n  \",props=>!props.active&&\"\\n    &:hover {\\n      background: #404040;\\n    }\\n  \");const SessionInfo=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  min-width: 0;\\n\"])));const SessionName=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  font-size: 14px;\\n  font-weight: 500;\\n  color: white;\\n  margin-bottom: 4px;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\"])));const SessionMeta=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  color: #a0a0a0;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n\"])));const SessionActions=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 4px;\\n  opacity: 0;\\n  transition: opacity 0.2s ease;\\n  \\n  \",\":hover & {\\n    opacity: 1;\\n  }\\n\"])),SessionItem);const ActionButton=styled.button(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  background: none;\\n  border: none;\\n  cursor: pointer;\\n  padding: 4px;\\n  border-radius: 4px;\\n  color: #a0a0a0;\\n  \\n  &:hover {\\n    background: #4a4a4a;\\n    color: white;\\n  }\\n\"])));const UserSection=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  border-top: 1px solid #4a4a4a;\\n  background: #202123;\\n\"])));const UserInfo=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  margin-bottom: 12px;\\n\"])));const UserAvatar=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  width: 32px;\\n  height: 32px;\\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\\n  border-radius: 50%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: white;\\n  font-weight: bold;\\n  font-size: 14px;\\n\"])));const UserDetails=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  flex: 1;\\n\"])));const UserName=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  font-size: 14px;\\n  font-weight: 500;\\n  color: white;\\n\"])));const UserStatus=styled.div(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  color: #a0a0a0;\\n\"])));const LogoutButton=styled.button(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 8px 12px;\\n  background: transparent;\\n  border: 1px solid #4a4a4a;\\n  border-radius: 6px;\\n  color: #a0a0a0;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 8px;\\n  font-size: 14px;\\n  \\n  &:hover {\\n    background: #4a4a4a;\\n    color: white;\\n  }\\n\"])));const EmptyState=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #a0a0a0;\\n\"])));const LoadingSpinner=styled.div(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  display: inline-block;\\n  width: 20px;\\n  height: 20px;\\n  border: 2px solid #4a4a4a;\\n  border-radius: 50%;\\n  border-top-color: #FF6B35;\\n  animation: spin 1s ease-in-out infinite;\\n  \\n  @keyframes spin {\\n    to { transform: rotate(360deg); }\\n  }\\n\"])));const CreateSessionModal=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  z-index: 1000;\\n\"])));const ModalContent=styled.div(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\n  background: #404040;\\n  padding: 24px;\\n  border-radius: 12px;\\n  width: 400px;\\n  max-width: 90vw;\\n\"])));const ModalTitle=styled.h3(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\\n  color: white;\\n  margin: 0 0 16px 0;\\n  font-size: 18px;\\n\"])));const ModalInput=styled.input(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 12px;\\n  background: #202123;\\n  border: 1px solid #4a4a4a;\\n  border-radius: 8px;\\n  color: white;\\n  font-size: 14px;\\n  margin-bottom: 16px;\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: #FF6B35;\\n  }\\n\"])));const ModalButtons=styled.div(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 12px;\\n  justify-content: flex-end;\\n\"])));const ModalButton=styled.button(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n  padding: 8px 16px;\\n  border-radius: 6px;\\n  font-size: 14px;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  \\n  &.primary {\\n    background: #FF6B35;\\n    color: white;\\n    border: none;\\n    \\n    &:hover {\\n      background: #e53e3e;\\n    }\\n  }\\n  \\n  &.secondary {\\n    background: transparent;\\n    color: #a0a0a0;\\n    border: 1px solid #4a4a4a;\\n    \\n    &:hover {\\n      background: #4a4a4a;\\n      color: white;\\n    }\\n  }\\n\"])));function ChatHistorySidebar(_ref){let{currentSessionId,setCurrentSessionId,onSessionSelect}=_ref;const{user,logout}=useAuth();const[chatHistory,setChatHistory]=useState([]);const[loading,setLoading]=useState(true);const[searchQuery,setSearchQuery]=useState('');const[showCreateModal,setShowCreateModal]=useState(false);const[showSearchModal,setShowSearchModal]=useState(false);const[newSessionName,setNewSessionName]=useState('');const[editingSession,setEditingSession]=useState(null);const[editName,setEditName]=useState('');// Load chat history on component mount\nuseEffect(()=>{loadChatHistory();},[]);const loadChatHistory=async()=>{try{setLoading(true);const response=await chatHistoryAPI.getAllChatHistory();if(response.success){setChatHistory(response.chat_history||[]);// Set first session as current if none selected\nif(!currentSessionId&&response.chat_history.length>0){setCurrentSessionId(response.chat_history[0].session_id);}}else{toast.error('Failed to load chat history');}}catch(error){console.error('Load chat history error:',error);toast.error('Failed to load chat history');}finally{setLoading(false);}};const handleCreateSession=async()=>{if(!newSessionName.trim())return;try{const response=await chatHistoryAPI.createChatSession(newSessionName.trim());if(response.success){await loadChatHistory();// Reload to get the new session\nsetCurrentSessionId(response.session.id);setShowCreateModal(false);setNewSessionName('');toast.success('New chat session created');}else{toast.error(response.message||'Failed to create session');}}catch(error){console.error('Create session error:',error);toast.error('Failed to create session');}};const handleUpdateSession=async()=>{if(!editName.trim()||!editingSession)return;try{const response=await chatHistoryAPI.updateChatSession(editingSession,editName.trim());if(response.success){await loadChatHistory();// Reload to get updated data\nsetEditingSession(null);setEditName('');toast.success('Session renamed successfully');}else{toast.error(response.message||'Failed to rename session');}}catch(error){console.error('Update session error:',error);toast.error('Failed to rename session');}};const handleDeleteSession=async sessionId=>{if(window.confirm('Are you sure you want to delete this session? This action cannot be undone.')){try{const response=await chatHistoryAPI.deleteChatSession(sessionId);if(response.success){await loadChatHistory();// Reload to get updated data\n// If deleted session was current, select first available\nif(currentSessionId===sessionId){const remainingSessions=chatHistory.filter(s=>s.session_id!==sessionId);if(remainingSessions.length>0){setCurrentSessionId(remainingSessions[0].session_id);}else{setCurrentSessionId(null);}}toast.success('Session deleted successfully');}else{toast.error(response.message||'Failed to delete session');}}catch(error){console.error('Delete session error:',error);toast.error('Failed to delete session');}}};const handleExportSession=async sessionId=>{try{const response=await chatHistoryAPI.exportSession(sessionId);if(response.success){// Create and download JSON file\nconst dataStr=JSON.stringify(response.export_data,null,2);const dataBlob=new Blob([dataStr],{type:'application/json'});const url=URL.createObjectURL(dataBlob);const link=document.createElement('a');link.href=url;link.download=\"chat-session-\".concat(sessionId,\".json\");link.click();URL.revokeObjectURL(url);toast.success('Session exported successfully');}else{toast.error(response.message||'Failed to export session');}}catch(error){console.error('Export session error:',error);toast.error('Failed to export session');}};const handleLogout=()=>{if(window.confirm('Are you sure you want to logout?')){logout();}};const formatDate=dateString=>{const date=new Date(dateString);const now=new Date();const diffTime=Math.abs(now-date);const diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays===1)return'Today';if(diffDays===2)return'Yesterday';if(diffDays<=7)return\"\".concat(diffDays-1,\" days ago\");return date.toLocaleDateString();};const filteredSessions=chatHistory.filter(session=>session.session_name.toLowerCase().includes(searchQuery.toLowerCase()));return/*#__PURE__*/_jsxs(SidebarContainer,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'18px',fontWeight:'600'},children:\"Chat History\"}),/*#__PURE__*/_jsx(ActionButton,{onClick:()=>setShowSearchModal(true),title:\"Search conversations\",children:/*#__PURE__*/_jsx(Search,{size:16})})]}),/*#__PURE__*/_jsxs(NewChatButton,{onClick:()=>setShowCreateModal(true),children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"New Chat\"]}),/*#__PURE__*/_jsxs(SearchContainer,{children:[/*#__PURE__*/_jsx(SearchIcon,{size:16}),/*#__PURE__*/_jsx(SearchInput,{placeholder:\"Search conversations...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})]}),/*#__PURE__*/_jsx(SessionsContainer,{children:loading?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'12px'},children:\"Loading conversations...\"})]}):filteredSessions.length===0?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(MessageSquare,{size:48,style:{marginBottom:'16px',opacity:0.5}}),/*#__PURE__*/_jsx(\"div\",{children:\"No conversations found\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',marginTop:'8px'},children:searchQuery?'Try adjusting your search':'Start a new conversation'})]}):filteredSessions.map(session=>/*#__PURE__*/_jsxs(SessionItem,{active:currentSessionId===session.session_id,onClick:()=>{setCurrentSessionId(session.session_id);if(onSessionSelect){onSessionSelect(session);}},children:[/*#__PURE__*/_jsxs(SessionInfo,{children:[/*#__PURE__*/_jsx(SessionName,{children:editingSession===session.session_id?/*#__PURE__*/_jsx(\"input\",{value:editName,onChange:e=>setEditName(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleUpdateSession(),onBlur:handleUpdateSession,autoFocus:true,style:{background:'transparent',border:'none',color:'white',fontSize:'14px',width:'100%'}}):session.session_name}),/*#__PURE__*/_jsxs(SessionMeta,{children:[/*#__PURE__*/_jsx(Clock,{size:12}),formatDate(session.created_at),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),session.message_count,\" messages\"]})]}),/*#__PURE__*/_jsxs(SessionActions,{children:[/*#__PURE__*/_jsx(ActionButton,{onClick:e=>{e.stopPropagation();handleExportSession(session.session_id);},title:\"Export session\",children:/*#__PURE__*/_jsx(Download,{size:14})}),/*#__PURE__*/_jsx(ActionButton,{onClick:e=>{e.stopPropagation();setEditingSession(session.session_id);setEditName(session.session_name);},title:\"Rename session\",children:/*#__PURE__*/_jsx(Edit3,{size:14})}),/*#__PURE__*/_jsx(ActionButton,{onClick:e=>{e.stopPropagation();handleDeleteSession(session.session_id);},title:\"Delete session\",children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]},session.session_id))}),/*#__PURE__*/_jsxs(UserSection,{children:[/*#__PURE__*/_jsxs(UserInfo,{children:[/*#__PURE__*/_jsx(UserAvatar,{children:user?user.charAt(0).toUpperCase():'U'}),/*#__PURE__*/_jsxs(UserDetails,{children:[/*#__PURE__*/_jsx(UserName,{children:user||'User'}),/*#__PURE__*/_jsx(UserStatus,{children:\"Active\"})]})]}),/*#__PURE__*/_jsxs(LogoutButton,{onClick:handleLogout,children:[/*#__PURE__*/_jsx(LogOut,{size:16}),\"Logout\"]})]}),showCreateModal&&/*#__PURE__*/_jsx(CreateSessionModal,{onClick:()=>setShowCreateModal(false),children:/*#__PURE__*/_jsxs(ModalContent,{onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(ModalTitle,{children:\"Create New Chat\"}),/*#__PURE__*/_jsx(ModalInput,{placeholder:\"Enter session name...\",value:newSessionName,onChange:e=>setNewSessionName(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleCreateSession(),autoFocus:true}),/*#__PURE__*/_jsxs(ModalButtons,{children:[/*#__PURE__*/_jsx(ModalButton,{className:\"secondary\",onClick:()=>setShowCreateModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(ModalButton,{className:\"primary\",onClick:handleCreateSession,disabled:!newSessionName.trim(),children:\"Create\"})]})]})}),/*#__PURE__*/_jsx(ChatHistorySearch,{isOpen:showSearchModal,onClose:()=>setShowSearchModal(false),onResultClick:result=>{// Navigate to the session when a search result is clicked\nconst session=chatHistory.find(s=>s.session_id===result.session_id);if(session){setCurrentSessionId(result.session_id);if(onSessionSelect){onSessionSelect(session);}}}})]});}export default ChatHistorySidebar;","map":{"version":3,"names":["React","useState","useEffect","useAuth","chatHistoryAPI","LogOut","Plus","Edit3","Trash2","User","MessageSquare","Search","Download","Clock","MoreVertical","ChevronRight","styled","toast","ChatHistorySearch","jsx","_jsx","jsxs","_jsxs","SidebarContainer","div","_templateObject","_taggedTemplateLiteral","Header","_templateObject2","NewChatButton","button","_templateObject3","SearchContainer","_templateObject4","SearchInput","input","_templateObject5","SearchIcon","_templateObject6","SessionsContainer","_templateObject7","SessionItem","_templateObject8","props","active","SessionInfo","_templateObject9","SessionName","_templateObject0","SessionMeta","_templateObject1","SessionActions","_templateObject10","ActionButton","_templateObject11","UserSection","_templateObject12","UserInfo","_templateObject13","UserAvatar","_templateObject14","UserDetails","_templateObject15","UserName","_templateObject16","UserStatus","_templateObject17","LogoutButton","_templateObject18","EmptyState","_templateObject19","LoadingSpinner","_templateObject20","CreateSessionModal","_templateObject21","ModalContent","_templateObject22","ModalTitle","h3","_templateObject23","ModalInput","_templateObject24","ModalButtons","_templateObject25","ModalButton","_templateObject26","ChatHistorySidebar","_ref","currentSessionId","setCurrentSessionId","onSessionSelect","user","logout","chatHistory","setChatHistory","loading","setLoading","searchQuery","setSearchQuery","showCreateModal","setShowCreateModal","showSearchModal","setShowSearchModal","newSessionName","setNewSessionName","editingSession","setEditingSession","editName","setEditName","loadChatHistory","response","getAllChatHistory","success","chat_history","length","session_id","error","console","handleCreateSession","trim","createChatSession","session","id","message","handleUpdateSession","updateChatSession","handleDeleteSession","sessionId","window","confirm","deleteChatSession","remainingSessions","filter","s","handleExportSession","exportSession","dataStr","JSON","stringify","export_data","dataBlob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","concat","click","revokeObjectURL","handleLogout","formatDate","dateString","date","Date","now","diffTime","Math","abs","diffDays","ceil","toLocaleDateString","filteredSessions","session_name","toLowerCase","includes","children","style","margin","fontSize","fontWeight","onClick","title","size","placeholder","value","onChange","e","target","marginTop","marginBottom","opacity","map","onKeyPress","key","onBlur","autoFocus","background","border","color","width","created_at","message_count","stopPropagation","charAt","toUpperCase","className","disabled","isOpen","onClose","onResultClick","result","find"],"sources":["/home/shubham/Documents/Personal/my-project/react-app/src/components/ChatHistorySidebar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { chatHistoryAPI } from '../services/api';\nimport { \n  LogOut, \n  Plus, \n  Edit3, \n  Trash2, \n  User, \n  MessageSquare,\n  Search,\n  Download,\n  Clock,\n  MoreVertical,\n  ChevronRight\n} from 'lucide-react';\nimport styled from 'styled-components';\nimport toast from 'react-hot-toast';\nimport ChatHistorySearch from './ChatHistorySearch';\n\nconst SidebarContainer = styled.div`\n  width: 300px;\n  background: #202123;\n  color: white;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    height: auto;\n    position: relative;\n  }\n`;\n\nconst Header = styled.div`\n  padding: 20px;\n  border-bottom: 1px solid #4a4a4a;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst NewChatButton = styled.button`\n  width: 100%;\n  padding: 12px 16px;\n  background: transparent;\n  border: 1px solid #4a4a4a;\n  border-radius: 8px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 20px;\n  \n  &:hover {\n    background: #4a4a4a;\n  }\n`;\n\nconst SearchContainer = styled.div`\n  padding: 0 20px 20px;\n  position: relative;\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 10px 12px 10px 40px;\n  background: #404040;\n  border: 1px solid #4a4a4a;\n  border-radius: 8px;\n  color: white;\n  font-size: 14px;\n  \n  &::placeholder {\n    color: #a0a0a0;\n  }\n  \n  &:focus {\n    outline: none;\n    border-color: #FF6B35;\n  }\n`;\n\nconst SearchIcon = styled(Search)`\n  position: absolute;\n  left: 32px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #a0a0a0;\n  size: 16px;\n`;\n\nconst SessionsContainer = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 0 20px;\n`;\n\nconst SessionItem = styled.div`\n  padding: 12px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  margin-bottom: 4px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n  \n  ${props => props.active && `\n    background: #404040;\n  `}\n  \n  ${props => !props.active && `\n    &:hover {\n      background: #404040;\n    }\n  `}\n`;\n\nconst SessionInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n`;\n\nconst SessionName = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n  color: white;\n  margin-bottom: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst SessionMeta = styled.div`\n  font-size: 12px;\n  color: #a0a0a0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst SessionActions = styled.div`\n  display: flex;\n  gap: 4px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  \n  ${SessionItem}:hover & {\n    opacity: 1;\n  }\n`;\n\nconst ActionButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  color: #a0a0a0;\n  \n  &:hover {\n    background: #4a4a4a;\n    color: white;\n  }\n`;\n\nconst UserSection = styled.div`\n  padding: 20px;\n  border-top: 1px solid #4a4a4a;\n  background: #202123;\n`;\n\nconst UserInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n`;\n\nconst UserAvatar = styled.div`\n  width: 32px;\n  height: 32px;\n  background: linear-gradient(135deg, #FF6B35 0%, #e53e3e 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: bold;\n  font-size: 14px;\n`;\n\nconst UserDetails = styled.div`\n  flex: 1;\n`;\n\nconst UserName = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n  color: white;\n`;\n\nconst UserStatus = styled.div`\n  font-size: 12px;\n  color: #a0a0a0;\n`;\n\nconst LogoutButton = styled.button`\n  width: 100%;\n  padding: 8px 12px;\n  background: transparent;\n  border: 1px solid #4a4a4a;\n  border-radius: 6px;\n  color: #a0a0a0;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  font-size: 14px;\n  \n  &:hover {\n    background: #4a4a4a;\n    color: white;\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 40px 20px;\n  color: #a0a0a0;\n`;\n\nconst LoadingSpinner = styled.div`\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #4a4a4a;\n  border-radius: 50%;\n  border-top-color: #FF6B35;\n  animation: spin 1s ease-in-out infinite;\n  \n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n`;\n\nconst CreateSessionModal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;\n\nconst ModalContent = styled.div`\n  background: #404040;\n  padding: 24px;\n  border-radius: 12px;\n  width: 400px;\n  max-width: 90vw;\n`;\n\nconst ModalTitle = styled.h3`\n  color: white;\n  margin: 0 0 16px 0;\n  font-size: 18px;\n`;\n\nconst ModalInput = styled.input`\n  width: 100%;\n  padding: 12px;\n  background: #202123;\n  border: 1px solid #4a4a4a;\n  border-radius: 8px;\n  color: white;\n  font-size: 14px;\n  margin-bottom: 16px;\n  \n  &:focus {\n    outline: none;\n    border-color: #FF6B35;\n  }\n`;\n\nconst ModalButtons = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n\nconst ModalButton = styled.button`\n  padding: 8px 16px;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &.primary {\n    background: #FF6B35;\n    color: white;\n    border: none;\n    \n    &:hover {\n      background: #e53e3e;\n    }\n  }\n  \n  &.secondary {\n    background: transparent;\n    color: #a0a0a0;\n    border: 1px solid #4a4a4a;\n    \n    &:hover {\n      background: #4a4a4a;\n      color: white;\n    }\n  }\n`;\n\nfunction ChatHistorySidebar({ currentSessionId, setCurrentSessionId, onSessionSelect }) {\n  const { user, logout } = useAuth();\n  const [chatHistory, setChatHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showSearchModal, setShowSearchModal] = useState(false);\n  const [newSessionName, setNewSessionName] = useState('');\n  const [editingSession, setEditingSession] = useState(null);\n  const [editName, setEditName] = useState('');\n\n  // Load chat history on component mount\n  useEffect(() => {\n    loadChatHistory();\n  }, []);\n\n  const loadChatHistory = async () => {\n    try {\n      setLoading(true);\n      const response = await chatHistoryAPI.getAllChatHistory();\n      if (response.success) {\n        setChatHistory(response.chat_history || []);\n        \n        // Set first session as current if none selected\n        if (!currentSessionId && response.chat_history.length > 0) {\n          setCurrentSessionId(response.chat_history[0].session_id);\n        }\n      } else {\n        toast.error('Failed to load chat history');\n      }\n    } catch (error) {\n      console.error('Load chat history error:', error);\n      toast.error('Failed to load chat history');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateSession = async () => {\n    if (!newSessionName.trim()) return;\n    \n    try {\n      const response = await chatHistoryAPI.createChatSession(newSessionName.trim());\n      if (response.success) {\n        await loadChatHistory(); // Reload to get the new session\n        setCurrentSessionId(response.session.id);\n        setShowCreateModal(false);\n        setNewSessionName('');\n        toast.success('New chat session created');\n      } else {\n        toast.error(response.message || 'Failed to create session');\n      }\n    } catch (error) {\n      console.error('Create session error:', error);\n      toast.error('Failed to create session');\n    }\n  };\n\n  const handleUpdateSession = async () => {\n    if (!editName.trim() || !editingSession) return;\n    \n    try {\n      const response = await chatHistoryAPI.updateChatSession(editingSession, editName.trim());\n      if (response.success) {\n        await loadChatHistory(); // Reload to get updated data\n        setEditingSession(null);\n        setEditName('');\n        toast.success('Session renamed successfully');\n      } else {\n        toast.error(response.message || 'Failed to rename session');\n      }\n    } catch (error) {\n      console.error('Update session error:', error);\n      toast.error('Failed to rename session');\n    }\n  };\n\n  const handleDeleteSession = async (sessionId) => {\n    if (window.confirm('Are you sure you want to delete this session? This action cannot be undone.')) {\n      try {\n        const response = await chatHistoryAPI.deleteChatSession(sessionId);\n        if (response.success) {\n          await loadChatHistory(); // Reload to get updated data\n          \n          // If deleted session was current, select first available\n          if (currentSessionId === sessionId) {\n            const remainingSessions = chatHistory.filter(s => s.session_id !== sessionId);\n            if (remainingSessions.length > 0) {\n              setCurrentSessionId(remainingSessions[0].session_id);\n            } else {\n              setCurrentSessionId(null);\n            }\n          }\n          \n          toast.success('Session deleted successfully');\n        } else {\n          toast.error(response.message || 'Failed to delete session');\n        }\n      } catch (error) {\n        console.error('Delete session error:', error);\n        toast.error('Failed to delete session');\n      }\n    }\n  };\n\n  const handleExportSession = async (sessionId) => {\n    try {\n      const response = await chatHistoryAPI.exportSession(sessionId);\n      if (response.success) {\n        // Create and download JSON file\n        const dataStr = JSON.stringify(response.export_data, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `chat-session-${sessionId}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n        toast.success('Session exported successfully');\n      } else {\n        toast.error(response.message || 'Failed to export session');\n      }\n    } catch (error) {\n      console.error('Export session error:', error);\n      toast.error('Failed to export session');\n    }\n  };\n\n  const handleLogout = () => {\n    if (window.confirm('Are you sure you want to logout?')) {\n      logout();\n    }\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffTime = Math.abs(now - date);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 1) return 'Today';\n    if (diffDays === 2) return 'Yesterday';\n    if (diffDays <= 7) return `${diffDays - 1} days ago`;\n    return date.toLocaleDateString();\n  };\n\n  const filteredSessions = chatHistory.filter(session =>\n    session.session_name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <SidebarContainer>\n      <Header>\n        <h2 style={{ margin: 0, fontSize: '18px', fontWeight: '600' }}>Chat History</h2>\n        <ActionButton\n          onClick={() => setShowSearchModal(true)}\n          title=\"Search conversations\"\n        >\n          <Search size={16} />\n        </ActionButton>\n      </Header>\n\n      <NewChatButton onClick={() => setShowCreateModal(true)}>\n        <Plus size={16} />\n        New Chat\n      </NewChatButton>\n\n      <SearchContainer>\n        <SearchIcon size={16} />\n        <SearchInput\n          placeholder=\"Search conversations...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n        />\n      </SearchContainer>\n\n      <SessionsContainer>\n        {loading ? (\n          <EmptyState>\n            <LoadingSpinner />\n            <div style={{ marginTop: '12px' }}>Loading conversations...</div>\n          </EmptyState>\n        ) : filteredSessions.length === 0 ? (\n          <EmptyState>\n            <MessageSquare size={48} style={{ marginBottom: '16px', opacity: 0.5 }} />\n            <div>No conversations found</div>\n            <div style={{ fontSize: '12px', marginTop: '8px' }}>\n              {searchQuery ? 'Try adjusting your search' : 'Start a new conversation'}\n            </div>\n          </EmptyState>\n        ) : (\n          filteredSessions.map((session) => (\n            <SessionItem\n              key={session.session_id}\n              active={currentSessionId === session.session_id}\n              onClick={() => {\n                setCurrentSessionId(session.session_id);\n                if (onSessionSelect) {\n                  onSessionSelect(session);\n                }\n              }}\n            >\n              <SessionInfo>\n                <SessionName>\n                  {editingSession === session.session_id ? (\n                    <input\n                      value={editName}\n                      onChange={(e) => setEditName(e.target.value)}\n                      onKeyPress={(e) => e.key === 'Enter' && handleUpdateSession()}\n                      onBlur={handleUpdateSession}\n                      autoFocus\n                      style={{\n                        background: 'transparent',\n                        border: 'none',\n                        color: 'white',\n                        fontSize: '14px',\n                        width: '100%'\n                      }}\n                    />\n                  ) : (\n                    session.session_name\n                  )}\n                </SessionName>\n                <SessionMeta>\n                  <Clock size={12} />\n                  {formatDate(session.created_at)}\n                  <span>â€¢</span>\n                  {session.message_count} messages\n                </SessionMeta>\n              </SessionInfo>\n              \n              <SessionActions>\n                <ActionButton\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleExportSession(session.session_id);\n                  }}\n                  title=\"Export session\"\n                >\n                  <Download size={14} />\n                </ActionButton>\n                <ActionButton\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setEditingSession(session.session_id);\n                    setEditName(session.session_name);\n                  }}\n                  title=\"Rename session\"\n                >\n                  <Edit3 size={14} />\n                </ActionButton>\n                <ActionButton\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDeleteSession(session.session_id);\n                  }}\n                  title=\"Delete session\"\n                >\n                  <Trash2 size={14} />\n                </ActionButton>\n              </SessionActions>\n            </SessionItem>\n          ))\n        )}\n      </SessionsContainer>\n\n      <UserSection>\n        <UserInfo>\n          <UserAvatar>\n            {user ? user.charAt(0).toUpperCase() : 'U'}\n          </UserAvatar>\n          <UserDetails>\n            <UserName>{user || 'User'}</UserName>\n            <UserStatus>Active</UserStatus>\n          </UserDetails>\n        </UserInfo>\n        \n        <LogoutButton onClick={handleLogout}>\n          <LogOut size={16} />\n          Logout\n        </LogoutButton>\n      </UserSection>\n\n      {showCreateModal && (\n        <CreateSessionModal onClick={() => setShowCreateModal(false)}>\n          <ModalContent onClick={(e) => e.stopPropagation()}>\n            <ModalTitle>Create New Chat</ModalTitle>\n            <ModalInput\n              placeholder=\"Enter session name...\"\n              value={newSessionName}\n              onChange={(e) => setNewSessionName(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && handleCreateSession()}\n              autoFocus\n            />\n            <ModalButtons>\n              <ModalButton \n                className=\"secondary\" \n                onClick={() => setShowCreateModal(false)}\n              >\n                Cancel\n              </ModalButton>\n              <ModalButton \n                className=\"primary\" \n                onClick={handleCreateSession}\n                disabled={!newSessionName.trim()}\n              >\n                Create\n              </ModalButton>\n            </ModalButtons>\n          </ModalContent>\n        </CreateSessionModal>\n      )}\n\n      <ChatHistorySearch\n        isOpen={showSearchModal}\n        onClose={() => setShowSearchModal(false)}\n        onResultClick={(result) => {\n          // Navigate to the session when a search result is clicked\n          const session = chatHistory.find(s => s.session_id === result.session_id);\n          if (session) {\n            setCurrentSessionId(result.session_id);\n            if (onSessionSelect) {\n              onSessionSelect(session);\n            }\n          }\n        }}\n      />\n    </SidebarContainer>\n  );\n}\n\nexport default ChatHistorySidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}